function get_file (a) {
    return files[a];
}
let files = [
    `var _0x7694=["\x70\x6C\x61\x79\x65\x72","\x75\x73\x65\x20\x73\x74\x72\x69\x63\x74","\x2E\x70\x72\x6F\x67\x72\x65\x73\x73\x2D\x62\x61\x72","\x71\x75\x65\x72\x79\x53\x65\x6C\x65\x63\x74\x6F\x72","\x2E\x70\x6C\x61\x79\x65\x72","\x2E\x70\x72\x6F\x6A\x65\x63\x74\x2D\x6C\x69\x6E\x6B","\x23\x62\x75\x67\x2D\x6C\x69\x6E\x6B","\x2E\x63\x6F\x6E\x74\x72\x6F\x6C\x73","\x2E\x66\x6C\x61\x67","\x2E\x74\x75\x72\x62\x6F","\x2E\x70\x61\x75\x73\x65","\x2E\x73\x74\x6F\x70","\x2E\x66\x75\x6C\x6C\x2D\x73\x63\x72\x65\x65\x6E","\x2E\x69\x6E\x74\x65\x72\x6E\x61\x6C\x2D\x65\x72\x72\x6F\x72","\x23\x65\x72\x72\x6F\x72\x2D\x62\x75\x67\x2D\x6C\x69\x6E\x6B","\x77\x69\x64\x74\x68","\x73\x74\x79\x6C\x65","\x70\x78","\x68\x65\x69\x67\x68\x74","\x69\x73\x54\x75\x72\x62\x6F","\x74\x69\x74\x6C\x65","\x54\x75\x72\x62\x6F\x20\x6D\x6F\x64\x65\x20\x65\x6E\x61\x62\x6C\x65\x64\x2E\x20\x53\x68\x69\x66\x74\x2B\x63\x6C\x69\x63\x6B\x20\x74\x6F\x20\x64\x69\x73\x61\x62\x6C\x65\x2E","\x53\x68\x69\x66\x74\x2B\x63\x6C\x69\x63\x6B\x20\x74\x6F\x20\x65\x6E\x61\x62\x6C\x65\x20\x74\x75\x72\x62\x6F\x20\x6D\x6F\x64\x65\x2E","\x64\x69\x73\x70\x6C\x61\x79","\x62\x6C\x6F\x63\x6B","\x6E\x6F\x6E\x65","\x73\x68\x69\x66\x74\x4B\x65\x79","\x73\x74\x61\x72\x74","\x63\x6C\x61\x73\x73\x4E\x61\x6D\x65","\x70\x61\x75\x73\x65","\x73\x74\x6F\x70\x41\x6C\x6C","\x74\x72\x69\x67\x67\x65\x72\x47\x72\x65\x65\x6E\x46\x6C\x61\x67","\x66\x6F\x63\x75\x73","\x70\x72\x65\x76\x65\x6E\x74\x44\x65\x66\x61\x75\x6C\x74","\x69\x73\x52\x75\x6E\x6E\x69\x6E\x67","\x70\x6C\x61\x79","\x66\x73","\x74\x6F\x67\x67\x6C\x65","\x63\x6C\x61\x73\x73\x4C\x69\x73\x74","\x64\x6F\x63\x75\x6D\x65\x6E\x74\x45\x6C\x65\x6D\x65\x6E\x74","\x72\x65\x71\x75\x65\x73\x74\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E\x57\x69\x74\x68\x4B\x65\x79\x73","\x77\x65\x62\x6B\x69\x74\x52\x65\x71\x75\x65\x73\x74\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x6D\x6F\x7A\x52\x65\x71\x75\x65\x73\x74\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x4E\x6F\x20\x66\x75\x6C\x6C\x20\x73\x63\x72\x65\x65\x6E\x20\x61\x76\x61\x69\x6C\x61\x62\x6C\x65\x2E","\x77\x61\x72\x6E","\x65\x78\x69\x74\x46\x75\x6C\x6C\x73\x63\x72\x65\x65\x6E","\x6D\x6F\x7A\x43\x61\x6E\x63\x65\x6C\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x77\x65\x62\x6B\x69\x74\x43\x61\x6E\x63\x65\x6C\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x62\x6F\x64\x79","\x6D\x61\x72\x67\x69\x6E\x4C\x65\x66\x74","\x6D\x61\x72\x67\x69\x6E\x54\x6F\x70","","\x64\x72\x61\x77","\x6B\x65\x79\x43\x6F\x64\x65","\x73\x63\x72\x6F\x6C\x6C\x54\x6F","\x69\x6E\x6E\x65\x72\x57\x69\x64\x74\x68","\x69\x6E\x6E\x65\x72\x48\x65\x69\x67\x68\x74","\x6F\x66\x66\x73\x65\x74\x48\x65\x69\x67\x68\x74","\x6D\x69\x6E","\x73\x65\x74\x5A\x6F\x6F\x6D","\x72\x65\x73\x69\x7A\x65","\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72","\x68\x61\x73\x54\x6F\x75\x63\x68\x45\x76\x65\x6E\x74\x73","\x74\x6F\x75\x63\x68\x73\x74\x61\x72\x74","\x74\x6F\x75\x63\x68\x65\x6E\x64","\x74\x6F\x75\x63\x68\x6D\x6F\x76\x65","\x63\x6C\x69\x63\x6B","\x66\x75\x6C\x6C\x73\x63\x72\x65\x65\x6E\x63\x68\x61\x6E\x67\x65","\x66\x75\x6C\x6C\x73\x63\x72\x65\x65\x6E","\x6D\x6F\x7A\x66\x75\x6C\x6C\x73\x63\x72\x65\x65\x6E\x63\x68\x61\x6E\x67\x65","\x6D\x6F\x7A\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x77\x65\x62\x6B\x69\x74\x66\x75\x6C\x6C\x73\x63\x72\x65\x65\x6E\x63\x68\x61\x6E\x67\x65","\x77\x65\x62\x6B\x69\x74\x49\x73\x46\x75\x6C\x6C\x53\x63\x72\x65\x65\x6E","\x70\x72\x6F\x6A\x65\x63\x74\x49\x64","\x70\x72\x6F\x6A\x65\x63\x74\x55\x52\x4C","\x68\x74\x74\x70\x73\x3A\x2F\x2F\x73\x63\x72\x61\x74\x63\x68\x2E\x6D\x69\x74\x2E\x65\x64\x75\x2F\x70\x72\x6F\x6A\x65\x63\x74\x73\x2F","\x2F","\x6C\x61\x73\x74\x43\x68\x69\x6C\x64","\x72\x65\x6D\x6F\x76\x65\x43\x68\x69\x6C\x64","\x66\x69\x72\x73\x74\x43\x68\x69\x6C\x64","\x6C\x6F\x61\x64\x53\x63\x72\x61\x74\x63\x68\x72\x32\x50\x72\x6F\x6A\x65\x63\x74","\x49\x4F","\x70\x72\x6F\x6A\x65\x63\x74\x54\x69\x74\x6C\x65","\x6C\x6F\x61\x64\x53\x63\x72\x61\x74\x63\x68\x72\x32\x50\x72\x6F\x6A\x65\x63\x74\x54\x69\x74\x6C\x65","\x68\x72\x65\x66","\x68\x74\x74\x70\x73\x3A\x2F\x2F\x67\x69\x74\x68\x75\x62\x2E\x63\x6F\x6D\x2F\x6E\x61\x74\x68\x61\x6E\x2F\x70\x68\x6F\x73\x70\x68\x6F\x72\x75\x73\x2F\x69\x73\x73\x75\x65\x73\x2F\x6E\x65\x77\x3F\x74\x69\x74\x6C\x65\x3D","\x26\x62\x6F\x64\x79\x3D","\x0A\x0A\x0A","\x0A\x68\x74\x74\x70\x73\x3A\x2F\x2F\x70\x68\x6F\x73\x70\x68\x6F\x72\x75\x73\x2E\x67\x69\x74\x68\x75\x62\x2E\x69\x6F\x2F\x23","\x0A","\x75\x73\x65\x72\x41\x67\x65\x6E\x74","\x73\x74\x61\x63\x6B","\x0A\x0A\x60\x60\x60\x0A","\x0A\x60\x60\x60","\x65\x72\x72\x6F\x72","\x31\x30\x25","\x70\x72\x6F\x67\x72\x65\x73\x73\x2D\x62\x61\x72","\x6F\x70\x61\x63\x69\x74\x79","\x6F\x6E\x6C\x6F\x61\x64","\x31\x30\x30\x25","\x7A\x6F\x6F\x6D\x58","\x7A\x6F\x6F\x6D\x59","\x73\x74\x61\x67\x65","\x6B\x65\x79\x64\x6F\x77\x6E","\x72\x6F\x6F\x74","\x68\x61\x6E\x64\x6C\x65\x45\x72\x72\x6F\x72","\x61\x70\x70\x65\x6E\x64\x43\x68\x69\x6C\x64","\x6F\x6E\x65\x72\x72\x6F\x72","\x70\x72\x6F\x67\x72\x65\x73\x73\x2D\x62\x61\x72\x20\x65\x72\x72\x6F\x72","\x6F\x6E\x70\x72\x6F\x67\x72\x65\x73\x73","\x6C\x6F\x61\x64\x65\x64","\x74\x6F\x74\x61\x6C","\x25"];P[_0x7694[0]]= (function(){_0x7694[1];var _0x7c31x1;var _0x7c31x2;var _0x7c31x3=480;var _0x7c31x4=360;var _0x7c31x5;var _0x7c31x6=null;var _0x7c31x7=false;var _0x7c31x8=document[_0x7694[3]](_0x7694[2]);var _0x7c31x9=document[_0x7694[3]](_0x7694[4]);var _0x7c31xa=document[_0x7694[3]](_0x7694[5]);var _0x7c31xb=document[_0x7694[3]](_0x7694[6]);var _0x7c31xc=document[_0x7694[3]](_0x7694[7]);var _0x7c31xd=document[_0x7694[3]](_0x7694[8]);var _0x7c31xe=document[_0x7694[3]](_0x7694[9]);var _0x7c31xf=document[_0x7694[3]](_0x7694[10]);var _0x7c31x10=document[_0x7694[3]](_0x7694[11]);var _0x7c31x11=document[_0x7694[3]](_0x7694[12]);var _0x7c31x12=document[_0x7694[3]](_0x7694[13]);var _0x7c31x13=document[_0x7694[3]](_0x7694[14]);var _0x7c31x14;function _0x7c31x15(_0x7c31x16,_0x7c31x17){_0x7c31x3= _0x7c31x16;_0x7c31x4= _0x7c31x17;_0x7c31x9[_0x7694[16]][_0x7694[15]]= _0x7c31x3+ _0x7694[17];_0x7c31x9[_0x7694[16]][_0x7694[18]]= _0x7c31x4+ _0x7694[17]}function _0x7c31x18(){_0x7c31x14= setTimeout(function(){_0x7c31x19();_0x7c31x14= true},500)}function _0x7c31x19(){_0x7c31x5[_0x7694[19]]=  !_0x7c31x5[_0x7694[19]];_0x7c31xd[_0x7694[20]]= _0x7c31x5[_0x7694[19]]?_0x7694[21]:_0x7694[22];_0x7c31xe[_0x7694[16]][_0x7694[23]]= _0x7c31x5[_0x7694[19]]?_0x7694[24]:_0x7694[25]}function _0x7c31x1a(_0x7c31x1b){if(!_0x7c31x5){return};if(_0x7c31x14=== true){return};if(_0x7c31x14){clearTimeout(_0x7c31x14)};if(_0x7c31x1b[_0x7694[26]]){_0x7c31x19()}else {_0x7c31x5[_0x7694[27]]();_0x7c31xf[_0x7694[28]]= _0x7694[29];_0x7c31x5[_0x7694[30]]();_0x7c31x5[_0x7694[31]]()};_0x7c31x5[_0x7694[32]]();_0x7c31x1b[_0x7694[33]]()}function _0x7c31x1c(_0x7c31x1b){if(!_0x7c31x5){return};if(_0x7c31x5[_0x7694[34]]){_0x7c31x5[_0x7694[29]]();_0x7c31xf[_0x7694[28]]= _0x7694[35]}else {_0x7c31x5[_0x7694[27]]();_0x7c31xf[_0x7694[28]]= _0x7694[29]};_0x7c31x5[_0x7694[32]]();_0x7c31x1b[_0x7694[33]]()}function _0x7c31x1d(_0x7c31x1b){if(!_0x7c31x5){return};_0x7c31x5[_0x7694[27]]();_0x7c31xf[_0x7694[28]]= _0x7694[29];_0x7c31x5[_0x7694[30]]();_0x7c31x5[_0x7694[32]]();_0x7c31x1b[_0x7694[33]]()}function _0x7c31x1e(_0x7c31x1b){if(_0x7c31x1b){_0x7c31x1b[_0x7694[33]]()};if(!_0x7c31x5){return};document[_0x7694[39]][_0x7694[38]][_0x7694[37]](_0x7694[36]);_0x7c31x7=  !_0x7c31x7;if(!_0x7c31x1b||  !_0x7c31x1b[_0x7694[26]]){if(_0x7c31x7){var _0x7c31x1f=document[_0x7694[39]];if(_0x7c31x1f[_0x7694[40]]){_0x7c31x1f[_0x7694[40]]()}else {if(_0x7c31x1f[_0x7694[41]]){_0x7c31x1f[_0x7694[41]](Element.ALLOW_KEYBOARD_INPUT)}else {if(_0x7c31x1f[_0x7694[42]]){_0x7c31x1f[_0x7694[42]]()}else {console[_0x7694[44]](_0x7694[43])}}}}else {if(document[_0x7694[45]]){document[_0x7694[45]]()}else {if(document[_0x7694[46]]){document[_0x7694[46]]()}else {if(document[_0x7694[47]]){document[_0x7694[47]]()}}}}};if(!_0x7c31x7){document[_0x7694[48]][_0x7694[16]][_0x7694[15]]= _0x7c31x3+ _0x7694[17];document[_0x7694[48]][_0x7694[16]][_0x7694[18]]= document[_0x7694[48]][_0x7694[16]][_0x7694[49]]= document[_0x7694[48]][_0x7694[16]][_0x7694[50]]= _0x7694[51]};_0x7c31x21();if(!_0x7c31x5[_0x7694[34]]){_0x7c31x5[_0x7694[52]]()};_0x7c31x5[_0x7694[32]]()}function _0x7c31x20(_0x7c31x1b){if(_0x7c31x7&& _0x7c31x1b[_0x7694[53]]=== 27){_0x7c31x1e(_0x7c31x1b)}}function _0x7c31x21(){if(!_0x7c31x5){return};if(_0x7c31x7){window[_0x7694[54]](0,0);var _0x7c31x22=8;var _0x7c31x23=window[_0x7694[55]]- _0x7c31x22* 2;var _0x7c31x24=window[_0x7694[56]]- _0x7c31x22- _0x7c31xc[_0x7694[57]];_0x7c31x23= Math[_0x7694[58]](_0x7c31x23,_0x7c31x24* _0x7c31x3/ _0x7c31x4);_0x7c31x24= _0x7c31x23* _0x7c31x4/ _0x7c31x3+ _0x7c31xc[_0x7694[57]];document[_0x7694[48]][_0x7694[16]][_0x7694[15]]= _0x7c31x23+ _0x7694[17];document[_0x7694[48]][_0x7694[16]][_0x7694[18]]= _0x7c31x24+ _0x7694[17];document[_0x7694[48]][_0x7694[16]][_0x7694[49]]= (window[_0x7694[55]]- _0x7c31x23)/ 2+ _0x7694[17];document[_0x7694[48]][_0x7694[16]][_0x7694[50]]= (window[_0x7694[56]]- _0x7c31x24+ _0x7c31x22)/ 2+ _0x7694[17];_0x7c31x5[_0x7694[59]](_0x7c31x23/ 480,_0x7c31x23* _0x7c31x4/ _0x7c31x3/ 360)}else {_0x7c31x5[_0x7694[59]](_0x7c31x3?_0x7c31x3/ 480:1,_0x7c31x4?_0x7c31x4/ 360:1)}}function _0x7c31x25(_0x7c31x1b){_0x7c31x1b[_0x7694[33]]()}window[_0x7694[61]](_0x7694[60],_0x7c31x21);if(P[_0x7694[62]]){_0x7c31xd[_0x7694[61]](_0x7694[63],_0x7c31x18);_0x7c31xd[_0x7694[61]](_0x7694[64],_0x7c31x1a);_0x7c31xf[_0x7694[61]](_0x7694[64],_0x7c31x1c);_0x7c31x10[_0x7694[61]](_0x7694[64],_0x7c31x1d);_0x7c31x11[_0x7694[61]](_0x7694[64],_0x7c31x1e);_0x7c31xd[_0x7694[61]](_0x7694[63],_0x7c31x25);_0x7c31xf[_0x7694[61]](_0x7694[63],_0x7c31x25);_0x7c31x10[_0x7694[61]](_0x7694[63],_0x7c31x25);_0x7c31x11[_0x7694[61]](_0x7694[63],_0x7c31x25);document[_0x7694[61]](_0x7694[65],function(_0x7c31x1b){if(_0x7c31x7){_0x7c31x1b[_0x7694[33]]()}})}else {_0x7c31xd[_0x7694[61]](_0x7694[66],_0x7c31x1a);_0x7c31xf[_0x7694[61]](_0x7694[66],_0x7c31x1c);_0x7c31x10[_0x7694[61]](_0x7694[66],_0x7c31x1d);_0x7c31x11[_0x7694[61]](_0x7694[66],_0x7c31x1e)};document[_0x7694[61]](_0x7694[67],function(){if(_0x7c31x7!== document[_0x7694[68]]){_0x7c31x1e()}});document[_0x7694[61]](_0x7694[69],function(){if(_0x7c31x7!== document[_0x7694[70]]){_0x7c31x1e()}});document[_0x7694[61]](_0x7694[71],function(){if(_0x7c31x7!== document[_0x7694[72]]){_0x7c31x1e()}});function _0x7c31x26(_0x7c31x27,_0x7c31x28,_0x7c31x29){P[_0x7694[0]][_0x7694[73]]= _0x7c31x27;P[_0x7694[0]][_0x7694[74]]= _0x7c31x27?_0x7694[75]+ _0x7c31x27+ _0x7694[76]:_0x7694[51];if(_0x7c31x5){_0x7c31x5[_0x7694[30]]();_0x7c31x5[_0x7694[29]]()};while(_0x7c31x9[_0x7694[79]]){_0x7c31x9[_0x7694[78]](_0x7c31x9[_0x7694[77]])};_0x7c31xe[_0x7694[16]][_0x7694[23]]= _0x7694[25];_0x7c31x12[_0x7694[16]][_0x7694[23]]= _0x7694[25];_0x7c31xf[_0x7694[28]]= _0x7694[29];_0x7c31x8[_0x7694[16]][_0x7694[23]]= _0x7694[25];if(_0x7c31x27){_0x7c31x2c(P[_0x7694[81]][_0x7694[80]](_0x7c31x27),_0x7c31x28);P[_0x7694[81]][_0x7694[83]](_0x7c31x27,function(_0x7c31x2a){if(_0x7c31x29){_0x7c31x29(P[_0x7694[0]][_0x7694[82]]= _0x7c31x2a)}})}else {if(_0x7c31x29){setTimeout(function(){_0x7c31x29(_0x7694[51])})}}}function _0x7c31x2b(_0x7c31x1b){_0x7c31x12[_0x7694[16]][_0x7694[23]]= _0x7694[24];_0x7c31x13[_0x7694[84]]= _0x7694[85]+ encodeURIComponent(P[_0x7694[0]][_0x7694[82]]|| P[_0x7694[0]][_0x7694[74]])+ _0x7694[86]+ encodeURIComponent(_0x7694[87]+ P[_0x7694[0]][_0x7694[74]]+ _0x7694[88]+ P[_0x7694[0]][_0x7694[73]]+ _0x7694[89]+ navigator[_0x7694[90]]+ (_0x7c31x1b[_0x7694[91]]?_0x7694[92]+ _0x7c31x1b[_0x7694[91]]+ _0x7694[93]:_0x7694[51]));console[_0x7694[94]](_0x7c31x1b[_0x7694[91]])}function _0x7c31x2c(_0x7c31x2d,_0x7c31x2e){_0x7c31x8[_0x7694[16]][_0x7694[23]]= _0x7694[25];setTimeout(function(){_0x7c31x8[_0x7694[16]][_0x7694[15]]= _0x7694[95];_0x7c31x8[_0x7694[28]]= _0x7694[96];_0x7c31x8[_0x7694[16]][_0x7694[97]]= 1;_0x7c31x8[_0x7694[16]][_0x7694[23]]= _0x7694[24]});_0x7c31x2d[_0x7694[98]]= function(_0x7c31x2f){_0x7c31x8[_0x7694[16]][_0x7694[15]]= _0x7694[99];setTimeout(function(){_0x7c31x8[_0x7694[16]][_0x7694[97]]= 0;setTimeout(function(){_0x7c31x8[_0x7694[16]][_0x7694[23]]= _0x7694[25]},300)},100);var _0x7c31x30=_0x7c31x5?_0x7c31x5[_0x7694[100]]:1;var _0x7c31x31=_0x7c31x5?_0x7c31x5[_0x7694[101]]:1;_0x7c31x30= _0x7c31x3?_0x7c31x3/ 480:_0x7c31x30;_0x7c31x31= _0x7c31x4?_0x7c31x4/ 360:_0x7c31x31;window[_0x7694[102]]= _0x7c31x5= _0x7c31x2f;_0x7c31x5[_0x7694[27]]();_0x7c31x5[_0x7694[59]](_0x7c31x30,_0x7c31x31);_0x7c31x5[_0x7694[104]][_0x7694[61]](_0x7694[103],_0x7c31x20);_0x7c31x5[_0x7694[105]]= _0x7c31x2b;_0x7c31x9[_0x7694[106]](_0x7c31x5[_0x7694[104]]);_0x7c31x5[_0x7694[32]]();if(_0x7c31x2e){_0x7c31x2e(_0x7c31x5);_0x7c31x2e= null}};_0x7c31x2d[_0x7694[107]]= function(_0x7c31x1b){_0x7c31x8[_0x7694[16]][_0x7694[15]]= _0x7694[99];_0x7c31x8[_0x7694[28]]= _0x7694[108];console[_0x7694[94]](_0x7c31x1b[_0x7694[91]])};_0x7c31x2d[_0x7694[109]]= function(_0x7c31x1b){_0x7c31x8[_0x7694[16]][_0x7694[15]]= (10+ _0x7c31x1b[_0x7694[110]]/ _0x7c31x1b[_0x7694[111]]* 90)+ _0x7694[112]}}return {load:_0x7c31x26,showProgress:_0x7c31x2c,setResolution:_0x7c31x15}}())`,
    `var ASCII=!1,P=function(){"use strict";var t=window.devicePixelRatio||1,e="ontouchstart"in document,o=function(t,e){t.prototype=Object.create(e.prototype),t.parent=e,t.base=function(t,o){return e.prototype[o].call(t,[].slice.call(arguments,2))}},n=function(t){[].slice.call(arguments,1).forEach(function(e){a(t,e)})},a=function(t,e){var o=e[0].toUpperCase()+e.substr(1);t.prototype.addEventListener=t.prototype.addEventListener||function(t,e){return(this["$"+t]=this["$"+t]||[]).push(e),this},t.prototype.removeEventListener=t.prototype.removeEventListener||function(t,e){var o=this["$"+t];if(o){var n=o.indexOf(e);-1!==n&&o.splice(n,1)}return this},t.prototype.dispatchEvent=t.prototype.dispatchEvent||function(t,e){var o=this["$"+t];o&&o.forEach(function(t){t(e)});var n=this["on"+t];return n&&n(e),this},t.prototype["on"+o]=function(t){return this.addEventListener(e,t),this},t.prototype["dispatch"+o]=function(t){return this.dispatchEvent(e,t),this}},s=function(){this.loaded=0};n(s,"load","progress","error"),s.prototype.progress=function(t,e,o){this.loaded=t,this.total=e,this.lengthComputable=o,this.dispatchProgress({loaded:t,total:e,lengthComputable:o})},s.prototype.load=function(t){this.result=t,this.isDone=!0,this.dispatchLoad(t)},s.prototype.error=function(t){this.result=t,this.isError=!0,this.isDone=!0,this.dispatchError(t)};var i=function(){this.requests=[],this.isDone=!0,this.update=this.update.bind(this),this.error=this.error.bind(this)};o(i,s),i.prototype.add=function(t){if(t instanceof i)for(var e=0;e<t.requests.length;e++)this.add(t.requests[e]);else this.requests.push(t),t.addEventListener("progress",this.update),t.addEventListener("load",this.update),t.addEventListener("error",this.error),this.update()},i.prototype.update=function(){if(!this.isError){for(var t=this.requests,e=t.length,o=0,n=0,a=!0,s=0,i=0;e--;){n+=(l=t[e]).loaded,l.isDone?(o+=l.loaded,i+=1):l.lengthComputable?o+=l.total:(a=!1,s+=1)}if(!a&&s!==t.length){var r=o/(t.length-s)*s;for(e=t.length,o=0,n=0,a=!0;e--;){var l;(l=t[e]).lengthComputable?(n+=l.loaded,o+=l.total):(o+=r,l.isDone&&(n+=r))}}this.progress(n,o,a),this.doneCount=i,this.isDone=i===t.length,this.isDone&&!this.defer&&this.load(this.getResult())}},i.prototype.getResult=function(){throw new Error("Users must implement getResult()")};var r={AcousticGuitar_F3:"instruments/AcousticGuitar_F3_22k.wav",AcousticPiano_As3:"instruments/AcousticPiano(5)_A%233_22k.wav",AcousticPiano_C4:"instruments/AcousticPiano(5)_C4_22k.wav",AcousticPiano_G4:"instruments/AcousticPiano(5)_G4_22k.wav",AcousticPiano_F5:"instruments/AcousticPiano(5)_F5_22k.wav",AcousticPiano_C6:"instruments/AcousticPiano(5)_C6_22k.wav",AcousticPiano_Ds6:"instruments/AcousticPiano(5)_D%236_22k.wav",AcousticPiano_D7:"instruments/AcousticPiano(5)_D7_22k.wav",AltoSax_A3:"instruments/AltoSax_A3_22K.wav",AltoSax_C6:"instruments/AltoSax(3)_C6_22k.wav",Bassoon_C3:"instruments/Bassoon_C3_22k.wav",BassTrombone_A2_2:"instruments/BassTrombone_A2(2)_22k.wav",BassTrombone_A2_3:"instruments/BassTrombone_A2(3)_22k.wav",Cello_C2:"instruments/Cello(3b)_C2_22k.wav",Cello_As2:"instruments/Cello(3)_A%232_22k.wav",Choir_F3:"instruments/Choir(4)_F3_22k.wav",Choir_F4:"instruments/Choir(4)_F4_22k.wav",Choir_F5:"instruments/Choir(4)_F5_22k.wav",Clarinet_C4:"instruments/Clarinet_C4_22k.wav",ElectricBass_G1:"instruments/ElectricBass(2)_G1_22k.wav",ElectricGuitar_F3:"instruments/ElectricGuitar(2)_F3(1)_22k.wav",ElectricPiano_C2:"instruments/ElectricPiano_C2_22k.wav",ElectricPiano_C4:"instruments/ElectricPiano_C4_22k.wav",EnglishHorn_D4:"instruments/EnglishHorn(1)_D4_22k.wav",EnglishHorn_F3:"instruments/EnglishHorn(1)_F3_22k.wav",Flute_B5_1:"instruments/Flute(3)_B5(1)_22k.wav",Flute_B5_2:"instruments/Flute(3)_B5(2)_22k.wav",Marimba_C4:"instruments/Marimba_C4_22k.wav",MusicBox_C4:"instruments/MusicBox_C4_22k.wav",Organ_G2:"instruments/Organ(2)_G2_22k.wav",Pizz_A3:"instruments/Pizz(2)_A3_22k.wav",Pizz_E4:"instruments/Pizz(2)_E4_22k.wav",Pizz_G2:"instruments/Pizz(2)_G2_22k.wav",SteelDrum_D5:"instruments/SteelDrum_D5_22k.wav",SynthLead_C4:"instruments/SynthLead(6)_C4_22k.wav",SynthLead_C6:"instruments/SynthLead(6)_C6_22k.wav",SynthPad_A3:"instruments/SynthPad(2)_A3_22k.wav",SynthPad_C6:"instruments/SynthPad(2)_C6_22k.wav",TenorSax_C3:"instruments/TenorSax(1)_C3_22k.wav",Trombone_B3:"instruments/Trombone_B3_22k.wav",Trumpet_E5:"instruments/Trumpet_E5_22k.wav",Vibraphone_C3:"instruments/Vibraphone_C3_22k.wav",Violin_D4:"instruments/Violin(2)_D4_22K.wav",Violin_A4:"instruments/Violin(3)_A4_22k.wav",Violin_E5:"instruments/Violin(3b)_E5_22k.wav",WoodenFlute_C5:"instruments/WoodenFlute_C5_22k.wav",BassDrum:"drums/BassDrum(1b)_22k.wav",Bongo:"drums/Bongo_22k.wav",Cabasa:"drums/Cabasa(1)_22k.wav",Clap:"drums/Clap(1)_22k.wav",Claves:"drums/Claves(1)_22k.wav",Conga:"drums/Conga(1)_22k.wav",Cowbell:"drums/Cowbell(3)_22k.wav",Crash:"drums/Crash(2)_22k.wav",Cuica:"drums/Cuica(2)_22k.wav",GuiroLong:"drums/GuiroLong(1)_22k.wav",GuiroShort:"drums/GuiroShort(1)_22k.wav",HiHatClosed:"drums/HiHatClosed(1)_22k.wav",HiHatOpen:"drums/HiHatOpen(2)_22k.wav",HiHatPedal:"drums/HiHatPedal(1)_22k.wav",Maracas:"drums/Maracas(1)_22k.wav",SideStick:"drums/SideStick(1)_22k.wav",SnareDrum:"drums/SnareDrum(1)_22k.wav",Tambourine:"drums/Tambourine(3)_22k.wav",Tom:"drums/Tom(1)_22k.wav",Triangle:"drums/Triangle(1)_22k.wav",Vibraslap:"drums/Vibraslap(1)_22k.wav",WoodBlock:"drums/WoodBlock(1)_22k.wav"},l={PROJECT_URL:"https://projects.scratch.mit.edu/internalapi/project/",ASSET_URL:"https://cdn.assets.scratch.mit.edu/internalapi/asset/",SOUNDBANK_URL:"https://cdn.rawgit.com/LLK/scratch-flash/v448/src/soundbank/",FONTS:{"":"Helvetica",Scratch:"Scratch",Donegal:"Donegal One",Gloria:"Gloria Hallelujah",Marker:"Permanent Marker",Mystery:"Mystery Quest"},LINE_HEIGHTS:{Helvetica:1.13,"Donegal One":1.25,"Gloria Hallelujah":1.97,"Permanent Marker":1.43,"Mystery Quest":1.37},ADPCM_STEPS:[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],ADPCM_INDEX:[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],init:function(t){l.projectRequest=t,l.zip=null},parseJSONish:function(t){if(!/^\s*\{/.test(t))throw new SyntaxError("Bad JSON");try{return JSON.parse(t)}catch(t){}if(/[^,:{}\[\]0-9\.\-+EINaefilnr-uy \n\r\t]/.test(t.replace(/"(\\.|[^"\\])*"/g,"")))throw new SyntaxError("Bad JSON");return(0,eval)("("+t+")")},load:function(t,e,o,n){var a=new s,i=new XMLHttpRequest;return i.open("GET",t,!0),i.onprogress=function(t){a.progress(t.loaded,t.total,t.lengthComputable)},i.onload=function(){200===i.status?a.load(i.response):a.error(new Error("HTTP "+i.status+": "+i.statusText))},i.onerror=function(){a.error(new Error("XHR Error"))},i.responseType=n||"",setTimeout(i.send.bind(i)),e&&a.onLoad(e.bind(o)),a},loadImage:function(t,e,o){var n=new s,a=new Image;return a.crossOrigin="anonymous",a.src=t,a.onload=function(){n.load(a)},a.onerror=function(){n.error(new Error("Failed to load image: "+t))},e&&n.onLoad(e.bind(o)),n},loadScratchr2Project:function(t,e,o){var n=new i;l.init(n),n.defer=!0;var a=l.PROJECT_URL+t+"/get/";return n.add(l.load(a).onLoad(function(t){try{var i=l.parseJSONish(t)}catch(t){return void n.add(l.load(a,null,null,"arraybuffer").onLoad(function(t){var e=new s;n.add(e),n.add(l.loadSB2Project(t,function(t){n.getResult=function(){return t},e.load()})),n.defer=!1}))}try{l.loadProject(i),e&&n.onLoad(e.bind(o)),n.isDone?n.load((new d).fromJSON(i)):(n.defer=!1,n.getResult=function(){return(new d).fromJSON(i)})}catch(t){n.error(t)}})),n},loadScratchr2ProjectTitle:function(t,e,o){var n=new i;return n.defer=!0,n.add(P.IO.load("https://scratch.mit.edu/projects/"+t+"/").onLoad(function(t){var a=/<title>\s*(.+?)(\s+on\s+Scratch)?\s*<\/title>/.exec(t);if(e&&n.onLoad(e.bind(o)),a){var s=document.createElement("div");s.innerHTML=a[1],n.load(s.innerText)}else n.error(new Error("No title"))})),n},loadJSONProject:function(t,e,o){var n=new i;l.init(n);try{l.loadProject(t),e&&n.onLoad(e.bind(o)),n.isDone?n.load((new d).fromJSON(t)):(n.defer=!1,n.getResult=function(){return(new d).fromJSON(t)})}catch(t){n.error(t)}return n},loadSB2Project:function(t,e,o){var n=new i;l.init(n);try{l.zip=new JSZip(t);var a=l.parseJSONish(l.zip.file("project.json").asText());l.loadProject(a),e&&n.onLoad(e.bind(o)),n.isDone?n.load((new d).fromJSON(a)):(n.defer=!1,n.getResult=function(){return(new d).fromJSON(a)})}catch(t){n.error(t)}return n},loadSB2File:function(t,e,o){var n=new i;n.defer=!0;var a=new s;n.add(a);var r=new FileReader;return r.onloadend=function(){n.defer=!0,n.add(l.loadSB2Project(r.result,function(t){n.defer=!1,n.getResult=function(){return t},n.update()})),a.load()},r.onprogress=function(t){a.progress(t.loaded,t.total,t.lengthComputable)},r.readAsArrayBuffer(t),e&&n.onLoad(e.bind(o)),n},loadProject:function(t){l.loadWavs(),l.loadArray(t.children,l.loadObject),l.loadBase(t)}};l.wavBuffers=Object.create(null),l.loadWavs=function(){if(w)for(var t in r)l.wavBuffers[t]?l.wavBuffers[t]instanceof s&&l.projectRequest.add(l.wavBuffers[t]):l.projectRequest.add(l.wavBuffers[t]=l.loadWavBuffer(t))},l.loadWavBuffer=function(t){var e=new s;return l.load(l.SOUNDBANK_URL+r[t],function(o){l.decodeAudio(o,function(o){l.wavBuffers[t]=o,e.load()})},null,"arraybuffer").onError(function(t){e.error(t)}),e},l.decodeAudio=function(t,e){w?l.decodeADPCMAudio(t,function(o,n){if(n)return setTimeout(function(){e(n)});var a=w.decodeAudioData(t,function(t){e(t)},function(t){console.warn(o,t),e(null)});a.catch&&a.catch(function(){})}):setTimeout(e)},l.decodeADPCMAudio=function(t,e){var o=new DataView(t);if(1380533830!==o.getUint32(0)||1463899717!==o.getUint32(8))return e(new Error("Unrecognized audio format"));for(var n={},a=12,s=o.byteLength-8;a<s;)n[String.fromCharCode(o.getUint8(a),o.getUint8(a+1),o.getUint8(a+2),o.getUint8(a+3))]=a,a+=8+o.getUint32(a+4,!0);var i=o.getUint16(20,!0),r=(o.getUint16(22,!0),o.getUint32(24,!0));o.getUint32(28,!0),o.getUint16(32,!0),o.getUint16(34,!0);if(17===i){var h,d,c,u,p=(o.getUint16(38,!0)-1)/2+4,f=o.getUint32(n.fact+8,!0),m=w.createBuffer(1,f,r),g=m.getChannelData(0),b=0,y=-1,v=n.data+8;a=v;for(var E=0;;)if((a-v)%p==0&&y<0){if(a>=o.byteLength)break;h=o.getInt16(a,!0),a+=2,b=o.getUint8(a),a+=1,a++,b>88&&(b=88),g[E++]=h/32767}else{if(y<0){if(a>=o.byteLength)break;y=o.getUint8(a),a+=1,c=15&y}else c=y>>4&15,y=-1;d=l.ADPCM_STEPS[b],u=0,4&c&&(u+=d),2&c&&(u+=d>>1),1&c&&(u+=d>>2),u+=d>>3,(b+=l.ADPCM_INDEX[c])>88&&(b=88),b<0&&(b=0),(h+=8&c?-u:u)>32767&&(h=32767),h<-32768&&(h=-32768),g[E++]=h/32768}return e(null,m)}e(new Error("Unrecognized WAV format "+i))},l.loadBase=function(t){t.scripts=t.scripts||[],t.costumes=l.loadArray(t.costumes,l.loadCostume),t.sounds=l.loadArray(t.sounds,l.loadSound),t.variables=t.variables||[],t.lists=t.lists||[]},l.loadArray=function(t,e){if(!t)return[];for(var o=0;o<t.length;o++)e(t[o]);return t},l.loadObject=function(t){t.cmd||t.listName||l.loadBase(t)},l.loadCostume=function(t){l.loadMD5(t.baseLayerMD5,t.baseLayerID,function(e){t.$image=e},!1),t.textLayerMD5&&l.loadMD5(t.textLayerMD5,t.textLayerID,function(e){t.$text=e},!1)},l.loadSound=function(t){l.loadMD5(t.md5,t.soundID,function(e){t.$buffer=e},!0)},l.fixSVG=function(t,e){if(1!==e.nodeType)return e;if("svg:"===e.nodeName.slice(0,4).toLowerCase()){for(var o=document.createElementNS("https://www.w3.org/2000/svg",e.localName),n=e.attributes,a=o.attributes,s=n.length;s--;)a.setNamedItemNS(n[s].cloneNode());for(;e.firstChild;)o.appendChild(e.firstChild);e=o}if("text"===e.nodeName){var i=e.getAttribute("font-family")||"";(i=l.FONTS[i]||i)&&(e.setAttribute("font-family",i),"Helvetica"===i&&(e.style.fontWeight="bold"));var r=+e.getAttribute("font-size");r||e.setAttribute("font-size",r=18),e.setAttribute("x",0),e.setAttribute("y",r*l.LINE_HEIGHTS[i]);var h=e.textContent.split("\n");if(h.length>1){e.textContent=h[0];for(var d=l.LINE_HEIGHTS[i]||1,c=(s=1,h.length);s<c;s++){var u=document.createElementNS(null,"tspan");u.textContent=h[s],u.setAttribute("x",0),u.setAttribute("y",r*(s+1)*d),u.setAttribute("id","ID"+Math.random()),e.appendChild(u)}}}else(e.hasAttribute("x")||e.hasAttribute("y"))&&e.hasAttribute("transform")&&(e.setAttribute("x",0),e.setAttribute("y",0));if("linearGradient"===e.nodeName){console.log("linearGradient"),e.setAttribute("id",e.getAttribute("id")+t.getAttribute("id")),e.setAttribute("gradientUnits","objectBoundingBox");var p=Number(e.getAttribute("x1")),f=Number(e.getAttribute("x2")),m=Number(e.getAttribute("y1")),g=Number(e.getAttribute("y2"));p===f?(p=0,f=0):p<f?(p=0,f=1):(p=1,f=0),m===g?(m=0,g=0):m<g?(m=0,g=1):(m=1,g=0),e.setAttribute("x1",p),e.setAttribute("x2",f),e.setAttribute("y1",m),e.setAttribute("y2",g)}if("radialGradient"===e.nodeName){console.log("radialGradient"),e.setAttribute("id",e.getAttribute("id")+t.getAttribute("id")),e.setAttribute("gradientUnits","objectBoundingBox");p=Number(e.getAttribute("x1")),f=Number(e.getAttribute("x2")),m=Number(e.getAttribute("y1")),g=Number(e.getAttribute("y2"));var b=Number(e.getAttribute("r")),y=Number(e.getAttribute("cx")),v=Number(e.getAttribute("cy"));console.log(b),console.log(y),console.log(v),p===f?(p=0,f=0):p<f?(p=0,f=1):(p=1,f=0),m===g?(m=0,g=0):m<g?(m=0,g=1):(m=1,g=0),e.setAttribute("x1",p),e.setAttribute("x2",f),e.setAttribute("y1",m),e.setAttribute("y2",g),e.setAttribute("cx",100),e.setAttribute("cy",0),e.setAttribute("r",100),console.log(e.getAttribute("r")),console.log(e.getAttribute("x1")),console.log(e.getAttribute("cx"))}return e.getAttribute("fill")&&e.getAttribute("fill").indexOf("url")>-1&&e.setAttribute("fill",e.getAttribute("fill").replace(/.$/,t.getAttribute("id"))),[].forEach.call(e.childNodes,function(o){var n=l.fixSVG(t,o);n!==o&&e.replaceChild(n,o)}),e},l.loadMD5=function(t,e,o,n){if(l.zip){var a=n?l.zip.file(e+".wav"):l.zip.file(e+".gif")||l.zip.file(e+".png")||l.zip.file(e+".jpg")||l.zip.file(e+".svg");t=a.name}var i=t.split(".").pop();if("svg"===i){var r=function(e){document.createElement("div");var n=(new DOMParser).parseFromString(e,"image/svg+xml").firstElementChild;if(n.id="svg"+t.split(".")[0],(n="0"===n.getAttribute("width")||"0"===n.getAttribute("height")?document.createElementNS("https://www.w3.org/2000/svg",n.localName):l.fixSVG(n,n)).style){document.body.appendChild(n);var a=n.viewBox&&n.viewBox.baseVal?n.viewBox.baseVal:{width:0,height:0,x:0,y:0};if(n.querySelector("path")||n.querySelector("image")){var i=n.getBBox();a.width=n.width.baseVal.value=Math.ceil(i.x+i.width+1),a.height=n.height.baseVal.value=Math.ceil(i.y+i.height+1),a.x=0,a.y=0}if(a&&(a.x||a.y)){i=n.getBBox();a.width=n.width.baseVal.value=Math.ceil(i.x+i.width+1),a.height=n.height.baseVal.value=Math.ceil(i.y+i.height+1),a.x=0,a.y=0}n.style["image-rendering"]="-moz-crisp-edges",n.style["image-rendering"]="pixelated";var r=new s,h=new Image,d=(new XMLSerializer).serializeToString(n);h.src="data:image/svg+xml;base64,"+btoa(d),n.style.display="none",h.onload=function(){o&&o(h),r.load()},h.onerror=function(e){console.error(t,h.src),r.error(new Error)},l.projectRequest.add(r)}};l.zip?r(a.asText()):l.projectRequest.add(l.load(l.ASSET_URL+t+"/get/",r))}else if("wav"===i){var h=new s;r=function(t){l.decodeAudio(t,function(t){o(t),h.load(t)})};if(l.projectRequest.add(h),l.zip){new Audio;r(a.asArrayBuffer())}else l.projectRequest.add(l.load(l.ASSET_URL+t+"/get/",r,null,"arraybuffer"))}else if(l.zip){h=new s;var d=new Image;d.onload=function(){o&&o(d),h.load()},d.src="data:image/"+("jpg"===i?"jpeg":i)+";base64,"+btoa(a.asBinary()),l.projectRequest.add(h)}else l.projectRequest.add(l.loadImage(l.ASSET_URL+t+"/get/",function(t){o(t)}))};var h=function(){this.isClone=!1,this.costumes=[],this.currentCostumeIndex=0,this.objName="",this.instrument=0,this.volume=1,this.soundRefs=Object.create(null),this.sounds=[],this.vars=Object.create(null),this.watchers=Object.create(null),this.lists=Object.create(null),this.procedures={},this.listeners={whenClicked:[],whenCloned:[],whenGreenFlag:[],whenIReceive:{},whenKeyPressed:[],whenSceneStarts:[],whenSensorGreaterThan:[]};for(var t=0;t<128;t++)this.listeners.whenKeyPressed.push([]);this.fns=[],this.scripts=[],this.filters={color:0,fisheye:0,whirl:0,pixelate:0,mosaic:0,brightness:0,ghost:0}};h.prototype.fromJSON=function(t){return this.objName=t.objName,this.scripts=t.scripts,this.currentCostumeIndex=t.currentCostumeIndex||0,this.costumes=t.costumes.map(function(t,e){return new b(t,e,this)},this),this.addSounds(t.sounds),this.addLists(t.lists),this.addVariables(t.variables),this},h.prototype.addSounds=function(t){for(var e=0;e<t.length;e++){var o=new y(t[e]);this.sounds.push(o),this.soundRefs[o.name]=o}},h.prototype.addVariables=function(t){for(var e=0;e<t.length;e++){if(t[e].isPeristent)throw new Error("Cloud variables are not supported");this.vars[t[e].name]=t[e].value}},h.prototype.addLists=function(t){for(var e=0;e<t.length;e++){if(t[e].isPeristent)throw new Error("Cloud lists are not supported");this.lists[t[e].listName]=t[e].contents}},h.prototype.showVariable=function(t,e){var o=this.watchers[t],n=this.stage;if(o){var a=n.children.indexOf(o);a!==n.children.length-1&&(n.children.splice(a,1),n.children.push(o))}else(o=this.watchers[t]=new P.Watcher(n)).x=n.defaultWatcherX,o.y=n.defaultWatcherY,n.defaultWatcherY+=26,n.defaultWatcherY>=450&&(n.defaultWatcherY=10,n.defaultWatcherX+=150),o.target=this,o.label=(o.target===n?"":o.target.objName+": ")+t,o.param=t,n.children.push(o);o.visible=e},h.prototype.showNextCostume=function(){this.currentCostumeIndex=(this.currentCostumeIndex+1)%this.costumes.length,this.isStage&&this.updateBackdrop(),this.saying&&this.updateBubble()},h.prototype.showPreviousCostume=function(){var t=this.costumes.length;this.currentCostumeIndex=(this.currentCostumeIndex+t-1)%t,this.isStage&&this.updateBackdrop(),this.saying&&this.updateBubble()},h.prototype.getCostumeName=function(){return this.costumes[this.currentCostumeIndex]?this.costumes[this.currentCostumeIndex].costumeName:""},h.prototype.setCostume=function(t){if("string"==typeof t){for(var e=0;e<this.costumes.length;e++)if(this.costumes[e].costumeName===t)return this.currentCostumeIndex=e,this.isStage&&this.updateBackdrop(),void(this.saying&&this.updateBubble());if(t===(this.isSprite?"next costume":"next backdrop"))return void this.showNextCostume();if(t===(this.isSprite?"previous costume":"previous backdrop"))return void this.showPreviousCostume()}isNaN(parseInt(t))||((e=(Math.floor(parseInt(t))-1)%this.costumes.length)<0&&(e+=this.costumes.length),this.currentCostumeIndex=e,this.isStage&&this.updateBackdrop(),this.saying&&this.updateBubble())},h.prototype.setFilter=function(t,e){var o=0,n=100;switch(t){case"whirl":case"fisheye":case"brightness":case"pixelate":case"mosaic":o=-1/0,n=1/0;break;case"color":(e%=200)<0&&(e+=200),n=200}e<o&&(e=o),e>n&&(e=n),e=Math.min(n,Math.max(o,e)),this.filters[t]=e,this.isStage&&this.updateFilters()},h.prototype.changeFilter=function(t,e){this.setFilter(t,this.filters[t]+e)},h.prototype.resetFilters=function(){this.filters={color:0,fisheye:0,whirl:0,pixelate:0,mosaic:0,brightness:0,ghost:0}},h.prototype.getSound=function(t){if("string"==typeof t){var e=this.soundRefs[t];if(e)return e;t=+t}var o=this.sounds.length;if(o&&"number"==typeof t&&t==t){var n=Math.round(t-1)%o;return n<0&&(n+=o),this.sounds[n]}},h.prototype.stopSounds=function(){this.node&&(this.node.disconnect(),this.node=null);for(var t=this.sounds.length;t--;){var e=this.sounds[t];e.node&&(e.node.disconnect(),e.node=null)}},h.prototype.ask=function(t){var e=this.stage;t?this.isSprite&&this.visible?(this.say(t),e.promptTitle.style.display="none"):(e.promptTitle.style.display="block",e.promptTitle.textContent=t):e.promptTitle.style.display="none",e.hidePrompt=!1,e.prompter.style.display="block",e.prompt.value="",e.prompt.focus()};var d=function(){this.stage=this,d.parent.call(this),this.children=[],this.defaultWatcherX=10,this.defaultWatcherY=10,this.info={},this.answer="",this.promptId=0,this.nextPromptId=0,this.tempoBPM=60,this.videoAlpha=1,this.zoomX=1,this.zoomY=1,this.maxZoomX=t,this.maxZoomY=t,this.baseNow=0,this.baseTime=0,this.timerStart=0,this.keys=[],this.keys[128]=0,this.rawMouseX=0,this.rawMouseY=0,this.mouseX=0,this.mouseY=0,this.mousePressed=!1,this.root=document.createElement("div"),this.root.style.position="absolute",this.root.style.overflow="hidden",this.root.style.width="480px",this.root.style.height="360px",this.root.style.fontSize="1px",this.root.style.background="#fff",this.root.style.WebkitUserSelect=this.root.style.MozUserSelect=this.root.style.MSUserSelect=this.root.style.WebkitUserSelect="none",this.backdropCanvas=document.createElement("canvas"),this.root.appendChild(this.backdropCanvas),this.backdropCanvas.width=480*t,this.backdropCanvas.height=360*t,this.backdropContext=this.backdropCanvas.getContext("2d"),this.penCanvas=document.createElement("canvas"),this.root.appendChild(this.penCanvas),this.penCanvas.width=480*t,this.penCanvas.height=360*t,this.penContext=this.penCanvas.getContext("2d"),this.penContext.lineCap="round",this.penContext.scale(t,t),this.canvas=document.createElement("canvas"),this.root.appendChild(this.canvas),this.canvas.width=480*t,this.canvas.height=360*t,this.context=this.canvas.getContext("2d"),this.canvas.tabIndex=0,this.canvas.style.outline="none",this.backdropCanvas.style.position=this.penCanvas.style.position=this.canvas.style.position="absolute",this.backdropCanvas.style.width="480px",this.penCanvas.style.width="480px",this.canvas.style.width="480px",this.backdropCanvas.style.height="360px",this.penCanvas.style.height="360px",this.canvas.style.height="360px",this.root.style.WebkitTransform="translateZ(0)",this.root.addEventListener("keypress",function(t){if(ASCII){t.altKey||t.metaKey||t.keyCode;var e=t.keyCode;t.target!==this.canvas||this.keys[e]||(ShiftKey=!1,e>64&&e<91&&(ShiftKey=!0),this.keys[e]=!0,self.key=e,t.stopPropagation(),t.preventDefault())}}.bind(this)),this.root.addEventListener("keydown",function(t){if(ASCII){if(t.altKey||t.metaKey||27===t.keyCode)return;var e=t.keyCode;t.stopPropagation(),t.target===this.canvas&&!this.keys[e]&&"16.17.37.38.39.40".match(e.toString())&&(16==e&&(e=128),37==e&&(e=28),39==e&&(e=29),38==e&&(e=30),40==e&&(e=31),this.keys[e]=!0,self.key=e,t.preventDefault(),ShiftKey?this.trigger("whenKeyPressed",128):this.trigger("whenKeyPressed",e))}else{if(t.altKey||t.metaKey||27===t.keyCode)return;this.keys[t.keyCode]=!0,t.stopPropagation(),t.target===this.canvas&&(t.preventDefault(),this.trigger("whenKeyPressed",t.keyCode))}}.bind(this)),this.root.addEventListener("keyup",function(t){if(ASCII){var e=t.keyCode;16==e&&(e=128),this.keys[e]=!1,e>64&&e<91&&(this.keys[e+32]=!1),this.keys[self.key]=!1,ShiftKey,t.stopPropagation(),t.target===this.canvas&&t.preventDefault()}else this.keys[t.keyCode]=!1,t.stopPropagation(),t.target===this.canvas&&t.preventDefault()}.bind(this)),document.addEventListener("touchstart",function(t){this.mousePressed=!0;for(var e=0;e<t.changedTouches.length;e++)this.updateMouse(t.changedTouches[e]),t.target===this.canvas&&this.clickMouse();t.target===this.canvas&&t.preventDefault()}.bind(this)),document.addEventListener("touchmove",function(t){this.updateMouse(t.changedTouches[0])}.bind(this)),document.addEventListener("touchend",function(t){this.releaseMouse()}.bind(this)),document.addEventListener("touchend",function(t){if(!w.mInit){w.mInit=!0;var e=w.createOscillator();e.frequency.value=0,e.connect(w.destination),e.start(0),e.stop(0)}}.bind(this)),document.addEventListener("mousedown",function(t){this.updateMouse(t),this.mousePressed=!0,t.target===this.canvas&&(this.clickMouse(),t.preventDefault(),this.canvas.focus())}.bind(this)),document.addEventListener("mousemove",function(t){this.updateMouse(t)}.bind(this)),document.addEventListener("mouseup",function(t){this.updateMouse(t),this.releaseMouse()}.bind(this)),this.prompter=document.createElement("div"),this.root.appendChild(this.prompter),this.prompter.style.position="absolute",this.prompter.style.left=this.prompter.style.right="14em",this.prompter.style.bottom="6em",this.prompter.style.padding="5em 30em 5em 5em",this.prompter.style.border="3em solid rgb(46, 174, 223)",this.prompter.style.borderRadius="8em",this.prompter.style.background="#fff",this.prompter.style.display="none",this.promptTitle=document.createElement("div"),this.prompter.appendChild(this.promptTitle),this.promptTitle.textContent="",this.promptTitle.style.cursor="default",this.promptTitle.style.font="bold 13em sans-serif",this.promptTitle.style.margin="0 "+-25/13+"em "+5/13+"em 0",this.promptTitle.style.whiteSpace="pre",this.promptTitle.style.overflow="hidden",this.promptTitle.style.textOverflow="ellipsis",this.prompt=document.createElement("input"),this.prompter.appendChild(this.prompt),this.prompt.style.border="0",this.prompt.style.background="#eee",this.prompt.style.MozBoxSizing=this.prompt.style.boxSizing="border-box",this.prompt.style.font="13em sans-serif",this.prompt.style.padding="0 "+3/13+"em",this.prompt.style.outline="0",this.prompt.style.margin="0",this.prompt.style.width="100%",this.prompt.style.height=20/13+"em",this.prompt.style.display="block",this.prompt.style.WebkitBorderRadius=this.prompt.style.borderRadius="0",this.prompt.style.WebkitBoxShadow=this.prompt.style.boxShadow="inset "+1/13+"em "+1/13+"em "+2/13+"em rgba(0, 0, 0, .2), inset "+-1/13+"em "+-1/13+"em "+1/13+"em rgba(255, 255, 255, .2)",this.prompt.style.WebkitAppearance="none",this.promptButton=document.createElement("div"),this.prompter.appendChild(this.promptButton),this.promptButton.style.width="22em",this.promptButton.style.height="22em",this.promptButton.style.position="absolute",this.promptButton.style.right="4em",this.promptButton.style.bottom="4em",this.promptButton.style.background="url(/img/icons.svg) -165em -37em",this.promptButton.style.backgroundSize="320em 96em",this.prompt.addEventListener("keydown",function(t){13===t.keyCode&&this.submitPrompt()}.bind(this)),this.promptButton.addEventListener(e?"touchstart":"mousedown",this.submitPrompt.bind(this)),this.initRuntime()};o(d,h),d.prototype.isStage=!0,d.prototype.fromJSON=function(t){return d.parent.prototype.fromJSON.call(this,t),t.children.forEach(function(t){t.listName||this.children.push(new(t.cmd?v:u)(this).fromJSON(t))},this),this.children.forEach(function(t){t.resolve&&t.resolve()},this),P.compile(this),this},d.prototype.focus=function(){this.promptId<this.nextPromptId?this.prompt.focus():this.canvas.focus()},d.prototype.updateMouse=function(t){var e=this.canvas.getBoundingClientRect(),o=Math.max(this.zoomX,this.zoomY),n=(t.clientX-e.left)/o-240,a=180-(t.clientY-e.top)/o;this.rawMouseX=n,this.rawMouseY=a,n<-240&&(n=-240),n>240&&(n=240),a<-180&&(a=-180),a>180&&(a=180),this.mouseX=n,this.mouseY=a},d.prototype.updateBackdrop=function(){this.backdropCanvas.width=this.zoomX*t*480,this.backdropCanvas.height=this.zoomY*t*360;var e=this.costumes[this.currentCostumeIndex];this.backdropContext.save();var o=Math.max(this.zoomX*t*e.scale,this.zoomY*t*e.scale);this.backdropContext.scale(o,o),this.backdropContext.drawImage(e.image,0,0,e.image.width/e.resScale,e.image.height/e.resScale),this.backdropContext.restore()},d.prototype.updateFilters=function(){this.backdropCanvas.style.opacity=Math.max(0,Math.min(1,1-this.filters.ghost/100))},d.prototype.setZoom=function(e,o){if(this.zoomX!==e||this.zoomY!==o){var n=Math.max(e,o);if(this.maxZoomX<e*t||this.maxZoomY<o*t){this.maxZoomX=e*t,this.maxZoomY=o*t;var a=document.createElement("canvas");a.width=this.penCanvas.width,a.height=this.penCanvas.height,a.getContext("2d").drawImage(this.penCanvas,0,0),this.penCanvas.width=480*n*t,this.penCanvas.height=360*n*t,this.penContext.drawImage(a,0,0,480*n*t,360*n*t),this.penContext.scale(this.maxZoomX,this.maxZoomY),this.penContext.lineCap="round"}this.root.style.width=this.canvas.style.width=this.backdropCanvas.style.width=(480*e|0)+"px",this.penCanvas.style.width=(480*n|0)+"px",this.root.style.height=this.canvas.style.height=this.backdropCanvas.style.height=(360*o|0)+"px",this.penCanvas.style.height=(360*n|0)+"px",this.root.style.fontSize=n+"px",this.zoomX=e,this.zoomY=o,this.updateBackdrop()}},d.prototype.clickMouse=function(){this.mouseSprite=void 0;for(var t=this.children.length;t--;){var e=this.children[t];if(e.isSprite&&e.visible&&e.filters.ghost<100&&e.touching("_mouse_"))return void(e.isDraggable?(this.mouseSprite=e,e.mouseDown()):this.triggerFor(e,"whenClicked"))}this.triggerFor(this,"whenClicked")},d.prototype.releaseMouse=function(){this.mousePressed=!1,this.mouseSprite&&(this.mouseSprite.mouseUp(),this.mouseSprite=void 0)},d.prototype.stopAllSounds=function(){for(var t=this.children,e=t.length;e--;)t[e].isSprite&&t[e].stopSounds();this.stopSounds()},d.prototype.removeAllClones=function(){for(var t=this.children.length;t--;)this.children[t].isClone&&(this.children[t].remove(),this.children.splice(t,1))},d.prototype.getObject=function(t){for(var e=0;e<this.children.length;e++){var o=this.children[e];if(o.objName===t&&!o.isClone)return o}if("_stage_"===t||t===this.objName)return this},d.prototype.getObjects=function(t){for(var e=[],o=0;o<this.children.length;o++)this.children[o].objName===t&&e.push(this.children[o]);return e},d.prototype.draw=function(){var e=this.context;this.canvas.width=480*this.zoomX*t,this.canvas.height=360*this.zoomY*t;var o=Math.max(this.zoomX*t,this.zoomY*t);e.scale(o,o),this.drawOn(e),this.hidePrompt&&(this.hidePrompt=!1,this.prompter.style.display="none",this.canvas.focus())},d.prototype.drawOn=function(t,e){for(var o=0;o<this.children.length;o++)this.children[o].visible&&this.children[o]!==e&&this.children[o].draw(t)},d.prototype.drawAllOn=function(t,e){var o=this.costumes[this.currentCostumeIndex];t.save(),t.scale(o.scale,o.scale),t.globalAlpha=Math.max(0,Math.min(1,1-this.filters.ghost/100)),t.drawImage(o.image,0,0,o.image.width/o.resScale,o.image.height/o.resScale),t.restore(),t.save();var n=Math.max(this.maxZoomX,this.maxZoomY);t.scale(1/n,1/n),t.drawImage(this.penCanvas,0,0),t.restore(),this.drawOn(t,e)},d.prototype.moveTo=function(){},d.prototype.submitPrompt=function(){this.promptId<this.nextPromptId&&(this.answer=this.prompt.value,this.promptId+=1,this.promptId>=this.nextPromptId&&(this.hidePrompt=!0))};var c={space:32,ctrl:17,shift:16,"left arrow":37,"up arrow":38,"right arrow":39,"down arrow":40,any:128},u=function(t){this.stage=t,u.parent.call(this),this.direction=90,this.indexInLibrary=-1,this.isDraggable=!1,this.isDragging=!1,this.rotationStyle="normal",this.scale=1,this.scratchX=0,this.scratchY=0,this.spriteInfo={},this.visible=!0,this.Hue=240,this.penHue=250,this.penSaturation=100,this.penLightness=50,this.penSize=1,this.isPenDown=!1,this.isSprite=!0,this.bubble=null,this.saying=!1,this.thinking=!1,this.sayId=0};function p(t,e,o){var n,a,s,i=Math.floor(6*t),r=6*t-i,l=o*(1-e),h=o*(1-r*e),d=o*(1-(1-r)*e);switch(i%6){case 0:n=o,a=d,s=l;break;case 1:n=h,a=o,s=l;break;case 2:n=l,a=o,s=d;break;case 3:n=l,a=h,s=o;break;case 4:n=d,a=l,s=o;break;case 5:n=o,a=l,s=h}return{r:255*n,g:255*a,b:255*s}}function f(t,e,o){t/=255,e/=255,o/=255;var n,a,s=Math.max(t,e,o),i=Math.min(t,e,o),r=s,l=s-i;if(a=0==s?0:l/s,s==i)n=0;else{switch(s){case t:n=(e-o)/l+(e<o?6:0);break;case e:n=(o-t)/l+2;break;case o:n=(t-e)/l+4}n/=6}return{h:n,s:a,v:r}}o(u,h),u.prototype.fromJSON=function(t){return u.parent.prototype.fromJSON.call(this,t),this.direction=t.direction,this.indexInLibrary=t.indexInLibrary,this.isDraggable=t.isDraggable,this.rotationStyle=t.rotationStyle,this.scale=t.scale,this.scratchX=t.scratchX,this.scratchY=t.scratchY,this.spriteInfo=t.spriteInfo,this.visible=t.visible,this},u.prototype.clone=function(){var t=new u(this.stage);t.isClone=!0,t.costumes=this.costumes,t.currentCostumeIndex=this.currentCostumeIndex,t.objName=this.objName,t.soundRefs=this.soundRefs,t.sounds=this.sounds;for(var e=(n=Object.keys(this.vars)).length;e--;){var o=n[e];t.vars[o]=this.vars[o]}var n;for(e=(n=Object.keys(this.lists)).length;e--;){o=n[e];t.lists[o]=this.lists[o].slice(0)}return t.procedures=this.procedures,t.listeners=this.listeners,t.fns=this.fns,t.scripts=this.scripts,t.filters={color:this.filters.color,fisheye:this.filters.fisheye,whirl:this.filters.whirl,pixelate:this.filters.pixelate,mosaic:this.filters.mosaic,brightness:this.filters.brightness,ghost:this.filters.ghost},t.direction=this.direction,t.indexInLibrary=this.indexInLibrary,t.isDraggable=this.isDraggable,t.rotationStyle=this.rotationStyle,t.scale=this.scale,t.volume=this.volume,t.scratchX=this.scratchX,t.scratchY=this.scratchY,t.visible=this.visible,t.penColor=this.penColor,t.penCSS=this.penCSS,t.penHue=this.penHue,t.penSaturation=this.penSaturation,t.penLightness=this.penLightness,t.penSize=this.penSize,t.isPenDown=this.isPenDown,t},u.prototype.mouseDown=function(){this.dragStartX=this.scratchX,this.dragStartY=this.scratchY,this.dragOffsetX=this.scratchX-this.stage.mouseX,this.dragOffsetY=this.scratchY-this.stage.mouseY,this.isDragging=!0},u.prototype.mouseUp=function(){this.isDragging&&this.scratchX===this.dragStartX&&this.scratchY===this.dragStartY&&this.stage.triggerFor(this,"whenClicked"),this.isDragging=!1},u.prototype.forward=function(t){var e=(90-this.direction)*Math.PI/180;this.moveTo(this.scratchX+t*Math.cos(e),this.scratchY+t*Math.sin(e))},u.prototype.moveTo=function(t,e){var o=this.scratchX,n=this.scratchY;if(o!==t||n!==e||this.isPenDown){if(this.scratchX=t,this.scratchY=e,this.isPenDown&&!this.isDragging){var a=this.stage.penContext;this.penSize%2>.5&&this.penSize%2<1.5&&(o-=.5,n-=.5,t-=.5,e-=.5),a.strokeStyle=this.penCSS||"hsl("+this.penHue+","+this.penSaturation+"%,"+(this.penLightness>100?200-this.penLightness:this.penLightness)+"%)",a.lineWidth=this.penSize,a.beginPath(),a.moveTo(240+o,180-n),a.lineTo(240+t,180-e),a.stroke()}this.saying&&this.updateBubble()}},u.prototype.dotPen=function(){var t=this.stage.penContext,e=this.scratchX,o=this.scratchY;t.fillStyle=this.penCSS||"hsl("+this.penHue+","+this.penSaturation+"%,"+(this.penLightness>100?200-this.penLightness:this.penLightness)+"%)",this.penSize<=960/this.stage.penCanvas.width?t.fillRect(240+e-this.penSize,180-o,this.penSize,this.penSize):(t.beginPath(),t.arc(240+e,180-o,Math.floor(this.penSize/2),0,2*Math.PI,!1),t.fill())},u.prototype.draw=function(e,o){var n=this.costumes[this.currentCostumeIndex];if(this.isDragging&&this.moveTo(this.dragOffsetX+this.stage.mouseX,this.dragOffsetY+this.stage.mouseY),n){e.save();var a=Math.max(this.stage.zoomX*t,this.stage.zoomY*t);if(e.translate(((this.scratchX+240)*a|0)/a,((180-this.scratchY)*a|0)/a),"normal"===this.rotationStyle?e.rotate((this.direction-90)*Math.PI/180):"leftRight"===this.rotationStyle&&this.direction<0&&e.scale(-1,1),e.scale(this.scale,this.scale),e.scale(n.scale,n.scale),e.translate(-n.rotationCenterX,-n.rotationCenterY),o||(e.globalAlpha=Math.max(0,Math.min(1,1-this.filters.ghost/100))),0!==this.filters.color||0!==this.filters.pixelate||0!==this.filters.mosaic||0!==this.filters.brightness||0!==this.filters.fisheye){var s=document.createElement("canvas");s.width=n.image.width,s.height=n.image.height;var i=s.getContext("2d");if(document.body.appendChild(s),i.drawImage(n.image,0,0,s.width,s.height),0!==this.filters.color){s.width=n.image.width,s.height=n.image.height,i.drawImage(n.image,0,0,n.image.width,n.image.height);for(var r=i.getImageData(0,0,n.image.width,n.image.height),l=0;l<r.data.length;l+=4){var h=f(r.data[l+0],r.data[l+1],r.data[l+2]),d=p(h.h+this.filters.color/200,Math.round(h.s),Math.round(h.v));r.data[l+0]=255&d.r,r.data[l+1]=255&d.g,r.data[l+2]=255&d.b,r.data[l+3]=r.data[l+3]}i.putImageData(r,0,0)}if(0!==this.filters.mosaic){var c=document.createElement("canvas");c.width=s.width,c.height=s.height;var u=c.getContext("2d");document.body.appendChild(c);var m=Math.floor((Math.abs(this.filters.mosaic)+5)/10)+1,g=document.createElement("canvas");g.width=s.width/m,g.height=s.height;var b=g.getContext("2d");document.body.appendChild(g);for(l=0;l<m;l++)b.drawImage(s,0,l*c.height/m,c.width/m,c.height/m);for(l=0;l<m;l++)u.drawImage(g,l*c.width/m,0,c.width/m,c.height);i.clearRect(0,0,s.width,s.height),i.drawImage(c,0,0),c.parentNode.removeChild(c),g.parentNode.removeChild(g)}if(0!==this.filters.brightness){var y=this.filters.brightness;y>0&&(y*=1);var v=y/100*255;s.width=480,s.height=360,i.drawImage(n.image,0,0,480,360);for(r=i.getImageData(0,0,480,360),l=0;l<r.data.length;l+=4)r.data[l+0]=r.data[l+0]+v,r.data[l+1]=r.data[l+1]+v,r.data[l+2]=r.data[l+2]+v,r.data[l+3]=r.data[l+3];i.putImageData(r,0,0)}0!==this.filters.pixelate&&(s.width=4800/(this.filters.pixelate+48),s.height=3600/(this.filters.pixelate+36),i.imageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.drawImage(n.image,0,0,s.width,s.height)),e.drawImage(s,0,0,n.image.width/n.resScale,n.image.height/n.resScale),s.parentNode.removeChild(s)}else e.drawImage(n.image,0,0,n.image.width/n.resScale,n.image.height/n.resScale);e.restore()}},u.prototype.setDirection=function(t){var e=t%360;e>180&&(e-=360),e<=-180&&(e+=360),this.direction=e,this.saying&&this.updateBubble()};var m=document.createElement("canvas"),g=m.getContext("2d");u.prototype.touching=function(t){var e=this.costumes[this.currentCostumeIndex];if("_mouse_"===t){var o=this.rotatedBounds(),n=this.stage.rawMouseX,a=this.stage.rawMouseY;if(n<o.left||a<o.bottom||n>o.right||a>o.top)return!1;var s=(n-this.scratchX)/this.scale,i=(this.scratchY-a)/this.scale;if("normal"===this.rotationStyle&&90!==this.direction){var r=(90-this.direction)*Math.PI/180,l=s,h=Math.sin(r),d=Math.cos(r);s=d*l-h*i,i=h*l+d*i}else"leftRight"===this.rotationStyle&&this.direction<0&&(s=-s);return 0!==(r=e.context.getImageData(s*e.resScale*e.bitmapResolution+e.rotationCenterX*e.resScale,i*e.resScale*e.bitmapResolution+e.rotationCenterY*e.resScale,1,1).data)[3]}if("_edge_"===t)return(o=this.rotatedBounds()).left<=-240||o.right>=240||o.top>=180||o.bottom<=-180;if(!this.visible)return!1;for(var c=this.stage.getObjects(t),u=c.length;u--;){var p=c[u];if(p.visible){var f=this.rotatedBounds(),b=p.rotatedBounds();if(!(f.bottom>=b.top||b.bottom>=f.top||f.left>=b.right||b.left>=f.right)){var y=Math.max(f.left,b.left),v=Math.min(f.top,b.top),E=Math.min(f.right,b.right),S=Math.max(f.bottom,b.bottom);m.width=Math.max(E-y,1),m.height=Math.max(v-S,1),g.save(),g.translate(-(y+240),-(180-v)),this.draw(g,!0),g.globalCompositeOperation="source-in",p.draw(g,!0),g.restore();for(var w=g.getImageData(0,0,Math.max(E-y,1),Math.max(v-S,1)).data,C=(E-y)*(v-S)*4,k=0;k<C;k+=4)if(w[k+3])return!0}}}return!1},u.prototype.touchingColor=function(t){var e=this.rotatedBounds();m.width=e.right-e.left,m.height=e.top-e.bottom,g.save(),g.translate(-(240+e.left),-(180-e.top)),this.stage.drawAllOn(g,this),g.globalCompositeOperation="destination-in",this.draw(g,!0),g.restore();var o=m.width,n=m.height;o<=0&&(o=1),n<=0&&(n=1);var a=g.getImageData(0,0,o,n).data;t&=16777215;for(var s=(e.right-e.left)*(e.top-e.bottom)*4,i=0;i<s;i+=4)if((a[i]<<16|a[i+1]<<8|a[i+2])===t&&a[i+3])return!0;return!1},u.prototype.bounceOffEdge=function(){var t=this.rotatedBounds(),e=240+t.left,o=180-t.top,n=240-t.right,a=180+t.bottom,s=Math.min(e,o,n,a);if(!(s>0)){var i=this.direction*Math.PI/180,r=Math.sin(i),l=-Math.cos(i);switch(s){case e:r=Math.max(.2,Math.abs(r));break;case o:l=Math.max(.2,Math.abs(l));break;case n:r=-Math.max(.2,Math.abs(r));break;case a:l=-Math.max(.2,Math.abs(l))}this.direction=180*Math.atan2(l,r)/Math.PI+90,this.saying&&this.updateBubble(),t=this.rotatedBounds();this.scratchX,this.scratchY;t.left<-240&&-240-t.left,t.top>180&&180-t.top,t.right>240&&240-t.left,t.bottom<-180&&-180-t.top}},u.prototype.rotatedBounds=function(){var t=this.costumes[this.currentCostumeIndex],e=t.scale*this.scale,o=-t.rotationCenterX*e,n=t.rotationCenterY*e,a=o+t.image.width*e/t.resScale,s=n-t.image.height*e/t.resScale;if("normal"!==this.rotationStyle)return"leftRight"===this.rotationStyle&&this.direction<0&&(o=(a=-o)-t.image.width*t.scale*this.scale/t.resScale),{left:this.scratchX+o,right:this.scratchX+a,top:this.scratchY+n,bottom:this.scratchY+s};var i=Math.sin(this.direction*Math.PI/180),r=Math.cos(this.direction*Math.PI/180),l=i*o-r*n,h=r*o+i*n,d=i*a-r*n,c=r*a+i*n,u=i*o-r*s,p=r*o+i*s,f=i*a-r*s,m=r*a+i*s;return{left:this.scratchX+Math.min(l,d,u,f),right:this.scratchX+Math.max(l,d,u,f),top:this.scratchY+Math.max(h,c,p,m),bottom:this.scratchY+Math.min(h,c,p,m)}},u.prototype.showRotatedBounds=function(){var t=this.rotatedBounds(),e=document.createElement("div");e.style.outline="1px solid red",e.style.position="absolute",e.style.left=240+t.left+"px",e.style.top=180-t.top+"px",e.style.width=t.right-t.left+"px",e.style.height=t.top-t.bottom+"px",this.stage.canvas.parentNode.appendChild(e)},u.prototype.distanceTo=function(t){if("_mouse_"===t)var e=this.stage.mouseX,o=this.stage.mouseY;else{var n=this.stage.getObject(t);if(!n)return 0;e=n.scratchX,o=n.scratchY}return Math.sqrt((this.scratchX-e)*(this.scratchX-e)+(this.scratchY-o)*(this.scratchY-o))},u.prototype.gotoObject=function(t){if("_mouse_"===t)this.moveTo(this.stage.mouseX,this.stage.mouseY);else if("_random_"===t){var e=Math.round(480*Math.random()-240),o=Math.round(360*Math.random()-180);this.moveTo(e,o)}else{var n=this.stage.getObject(t);if(!n)return 0;this.moveTo(n.scratchX,n.scratchY)}},u.prototype.pointTowards=function(t){if("_mouse_"===t)var e=this.stage.mouseX,o=this.stage.mouseY;else{var n=this.stage.getObject(t);if(!n)return 0;e=n.scratchX,o=n.scratchY}var a=e-this.scratchX,s=o-this.scratchY;this.direction=0===a&&0===s?90:180*Math.atan2(a,s)/Math.PI,this.saying&&this.updateBubble()},u.prototype.say=function(t,e){if(!(t=""+t)){if(this.saying=!1,!this.bubble)return;return this.bubble.style.display="none",++this.sayId}return this.saying=!0,this.thinking=e,this.bubble||(this.bubble=document.createElement("div"),this.bubble.style.maxWidth=127/14+"em",this.bubble.style.minWidth=48/14+"em",this.bubble.style.padding=8/14+"em "+10/14+"em",this.bubble.style.border=3/14+"em solid rgb(160, 160, 160)",this.bubble.style.borderRadius=10/14+"em",this.bubble.style.background="#fff",this.bubble.style.position="absolute",this.bubble.style.font="bold 14em sans-serif",this.bubble.style.whiteSpace="pre-wrap",this.bubble.style.wordWrap="break-word",this.bubble.style.textAlign="center",this.bubble.style.cursor="default",this.bubble.appendChild(this.bubbleText=document.createTextNode("")),this.bubble.appendChild(this.bubblePointer=document.createElement("div")),this.bubblePointer.style.position="absolute",this.bubblePointer.style.height="1.5em",this.bubblePointer.style.width=44/14+"em",this.bubblePointer.style.background="url(/img/icons.svg) "+-195/14+"em "+-4/14+"em",this.bubblePointer.style.backgroundSize=320/14+"em "+96/14+"em",this.stage.root.appendChild(this.bubble)),this.bubblePointer.style.backgroundPositionX=(e?-259:-195)/14+"em",this.bubble.style.display="block",this.bubbleText.nodeValue=t,this.updateBubble(),++this.sayId},u.prototype.updateBubble=function(){if(this.visible&&this.saying){var t,e,o=this.rotatedBounds(),n=Math.max(this.stage.zoomX,this.stage.zoomY),a=this.bubble.offsetWidth/n,s=this.bubble.offsetHeight/n;this.stage.zoomX<=this.stage.zoomY?(t=360,e=480*this.stage.zoomX/this.stage.zoomY):(t=360*this.stage.zoomY/this.stage.zoomX,e=480);var i=240+o.right,r=t-180+o.top;this.bubblePointer.style.top=(s-6)/14+"em",i+a+2>e?(this.bubble.style.right=(e-240-o.left)/14+"em",this.bubble.style.left="auto",this.bubblePointer.style.right=3/14+"em",this.bubblePointer.style.left="auto",this.bubblePointer.style.backgroundPositionY=-36/14+"em"):(this.bubble.style.left=i/14+"em",this.bubble.style.right="auto",this.bubblePointer.style.left=3/14+"em",this.bubblePointer.style.right="auto",this.bubblePointer.style.backgroundPositionY=-4/14+"em"),r+s+2>t&&(r=t-s-2),r<19&&(r=19),this.bubble.style.bottom=r/14+"em"}else this.bubble.style.display="none"},u.prototype.remove=function(){this.bubble&&(this.stage.root.removeChild(this.bubble),this.bubble=null),this.node&&(this.node.disconnect(),this.node=null)};var b=function(t,e,o){this.index=e,this.base=o,this.baseLayerID=t.baseLayerID,this.baseLayerMD5=t.baseLayerMD5,this.baseLayer=t.$image?t.$image:new Image(0,0),this.bitmapResolution=t.bitmapResolution||1,this.scale=1/this.bitmapResolution,this.costumeName=t.costumeName,this.rotationCenterX=t.rotationCenterX,this.rotationCenterY=t.rotationCenterY,this.textLayer=t.$text,this.resScale=Math.min(1.5*(P.resolution||960)/this.baseLayer.width,4),this.image=document.createElement("canvas"),this.context=this.image.getContext("2d"),this.render(),this.baseLayer.onload=function(){this.render()}.bind(this),this.textLayer&&(this.textLayer.onload=this.baseLayer.onload)};n(b,"load"),b.prototype.render=function(){!this.baseLayer.width||this.textLayer&&!this.textLayer.width||(this.image.width=this.baseLayer.width*this.resScale,this.image.height=this.baseLayer.height*this.resScale,this.context.mozImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.context.msImageSmoothingEnabled=!1,this.context.webkitImageSmoothingEnabled=!1,this.context.drawImage(this.baseLayer,0,0,this.image.width,this.image.height),this.textLayer&&this.context.drawImage(this.textLayer,0,0,this.image.width,this.image.height),this.base.isStage&&this.index==this.base.currentCostumeIndex&&setTimeout(function(){this.base.updateBackdrop()}.bind(this)))};var y=function(t){this.name=t.soundName,this.buffer=t.$buffer,this.duration=this.buffer?this.buffer.duration:0},v=function(t){this.stage=t,this.cmd="getVar:",this.color="#ee7d16",this.isDiscrete=!0,this.label="watcher",this.mode=1,this.param="var",this.sliderMax=100,this.sliderMin=0,this.target=void 0,this.visible=!0,this.x=0,this.y=0};v.prototype.fromJSON=function(t){if(this.cmd=t.cmd||"getVar:",t.color){var e=(t.color<0?t.color+16777216:t.color).toString(16);this.color="#000000".slice(0,-e.length)+e}return this.isDiscrete=null==t.isDiscrete||t.isDiscrete,this.label=t.label||"",this.mode=t.mode||1,this.param=t.param,this.sliderMax=null==t.sliderMax?100:t.sliderMax,this.sliderMin=t.sliderMin||0,this.targetName=t.target,this.visible=null==t.visible||t.visible,this.x=t.x||0,this.y=t.y||0,this},v.prototype.resolve=function(){this.target=this.stage.getObject(this.targetName),this.target&&"getVar:"===this.cmd&&(this.target.watchers[this.param]=this),this.label||(this.label=this.getLabel(),this.target.isSprite&&(this.label=this.target.objName+": "+this.label))};var E={costumeIndex:"costume #",xpos:"x position",ypos:"y position",heading:"direction",scale:"size",backgroundIndex:"background #",sceneName:"background name",tempo:"tempo",volume:"volume",answer:"answer",timer:"timer",soundLevel:"loudness",isLoud:"loud?",xScroll:"x scroll",yScroll:"y scroll"};v.prototype.getLabel=function(){switch(this.cmd){case"getVar:":return this.param;case"sensor:":return this.param+" sensor value";case"sensorPressed":return"sensor "+this.param+"?";case"timeAndDate":return this.param;case"senseVideoMotion":return"video "+this.param}return E[this.cmd]||""},v.prototype.draw=function(t){var e=0;if(this.target){switch(this.cmd){case"answer":e=this.stage.answer;break;case"backgroundIndex":e=this.stage.currentCostumeIndex+1;break;case"costumeIndex":e=this.target.currentCostumeIndex+1;break;case"getVar:":if(e=this.target.vars[this.param],3===this.mode&&this.stage.mousePressed){var o=this.stage.mouseX+240-this.x-5,n=180-this.stage.mouseY-this.y-20;o>=0&&n>=0&&o<=this.width-5-5&&n<=9&&(e=this.sliderMin+Math.max(0,Math.min(1,(o-2.5)/(this.width-5-5-5)))*(this.sliderMax-this.sliderMin),e=this.isDiscrete?Math.round(e):Math.round(100*e)/100,this.target.vars[this.param]=e)}break;case"heading":e=this.target.direction;break;case"scale":e=100*this.target.scale;break;case"sceneName":e=this.stage.getCostumeName();break;case"senseVideoMotion":case"soundLevel":break;case"tempo":e=this.stage.tempoBPM;break;case"timeAndDate":e=this.timeAndDate(this.param);break;case"timer":e=Math.round((this.stage.now()-this.stage.timerStart)/100)/10;break;case"volume":e=100*this.target.volume;break;case"xpos":e=this.target.scratchX;break;case"ypos":e=this.target.scratchY}if("number"==typeof e&&(e<.001||e>.001)&&(e=Math.round(1e3*e)/1e3),e=""+e,null==this.labelWidth&&(t.font="bold 11px sans-serif",this.labelWidth=t.measureText(this.label).width),t.save(),t.translate(this.x,this.y),1===this.mode||3===this.mode){t.font="bold 11px sans-serif";var a=Math.max(41,5+t.measureText(e).width+5),s=this.width=5+this.labelWidth+5+a+5,i=1===this.mode?21:32;t.strokeStyle="rgb(148, 145, 145)",t.fillStyle="rgb(193, 196, 199)",t.lineWidth=2,t.beginPath(),t.arc(6,6,5,Math.PI,3*Math.PI/2,!1),t.arc(s-5-1,6,5,3*Math.PI/2,0,!1),t.arc(s-5-1,i-5-1,5,0,Math.PI/2,!1),t.arc(6,i-5-1,5,Math.PI/2,Math.PI,!1),t.closePath(),t.stroke(),t.fill(),t.fillStyle="#000",t.fillText(this.label,5,14);var r=15,l=5+this.labelWidth+5,h=4;if(t.save(),t.translate(l,3),t.strokeStyle="#fff",t.fillStyle=this.color,t.lineWidth=2,t.beginPath(),t.arc(h+1,h+1,h,Math.PI,3*Math.PI/2,!1),t.arc(a-h-1,h+1,h,3*Math.PI/2,0,!1),t.arc(a-h-1,r-h-1,h,0,Math.PI/2,!1),t.arc(h+1,r-h-1,h,Math.PI/2,Math.PI,!1),t.closePath(),t.stroke(),t.fill(),t.fillStyle="#fff",t.textAlign="center",t.fillText(e,a/2,r-4),t.restore(),3===this.mode){var d=s-5-5,c=1.5;t.save(),t.translate(5,22),t.strokeStyle="rgb(148, 145, 145)",t.fillStyle="rgb(213, 216, 219)",t.lineWidth=2,t.beginPath(),t.arc(2.5,2.5,c,Math.PI,3*Math.PI/2,!1),t.arc(d-c-1,2.5,c,3*Math.PI/2,0,!1),t.arc(d-c-1,2.5,c,0,Math.PI/2,!1),t.arc(2.5,2.5,c,Math.PI/2,Math.PI,!1),t.closePath(),t.stroke(),t.fill();o=(d-5)*Math.max(0,Math.min(1,((+e||0)-this.sliderMin)/(this.sliderMax-this.sliderMin)));t.strokeStyle="rgb(108, 105, 105)",t.fillStyle="rgb(233, 236, 239)",t.beginPath(),t.arc(o+2.5,2.5,3.5,0,2*Math.PI,!1),t.stroke(),t.fill(),t.restore()}}else 2===this.mode&&(t.font="bold 15px sans-serif",r=21,a=Math.max(41,5+t.measureText(e).width+5),h=4,t.strokeStyle="#fff",t.fillStyle=this.color,t.lineWidth=2,t.beginPath(),t.arc(h+1,h+1,h,Math.PI,3*Math.PI/2,!1),t.arc(a-h-1,h+1,h,3*Math.PI/2,0,!1),t.arc(a-h-1,r-h-1,h,0,Math.PI/2,!1),t.arc(h+1,r-h-1,h,Math.PI/2,Math.PI,!1),t.closePath(),t.stroke(),t.fill(),t.fillStyle="#fff",t.textAlign="center",t.fillText(e,a/2,r-5));t.restore()}};var S=window.AudioContext||window.webkitAudioContext,w=S&&new S;return w.mInit=!1,{hasTouchEvents:e,getKeyCode:function(t){return"string"!=typeof t?""+t:c[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)},audioContext:w,IO:l,Base:h,Stage:d,Sprite:u,Watcher:v}}();P.compile=function(){"use strict";var t,e=["procDef","whenClicked","whenCloned","whenGreenFlag","whenIReceive","whenKeyPressed","whenSceneStarts","whenSensorGreaterThan"],o=function(t){for(var e=0;e<t.scripts.length;e++)a(t,t.scripts[e][2])},n=function(e){t[e]=(t[e]||0)+1},a=function(t,o){if(o[0]&&-1!==e.indexOf(o[0][0])){var a=function(){return t.fns.length+k.length},s=function(){var t=a();return k.push(w.length),t},i=function(t){w+="queue("+t+");\n",w+="return;\n"},r=function(t){w+="forceQueue("+t+");\n",w+="return;\n"},l=function(t){if(t)for(var e=0;e<t.length;e++)S(t[e])},h=function(e){return"string"!=typeof e?"getVars("+c(e)+")["+c(e)+"]":(void 0!==t.stage.vars[e]?"self":"S")+".vars["+c(e)+"]"},d=function(e){if("string"!=typeof e)return"getLists("+c(e)+")["+c(e)+"]";var o=void 0!==t.stage.lists[e]?"self":"S";return"S"!==o||t.lists[e]||(t.lists[e]=[]),o+".lists["+c(e)+"]"},c=function(t,e,o){var a;if("number"==typeof t||"boolean"==typeof t)return""+t;if("string"==typeof t)return'"'+t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/"/g,'\\"').replace(/\{/g,"\\x7b").replace(/\}/g,"\\x7d")+'"';if("getParam"===t[0])return function(t,e,o){if("string"!=typeof t)throw new Error("Dynamic parameters are not supported");if(!x)return"0";var n=x.indexOf(t);if(-1===n)return"0";var a=_[n],s="%n"===a||"%d"===a||"%c"===a?"num":"%b"===a?"bool":"";return"num"===s&&e?"C.numargs["+n+"]":"bool"===s&&o?"C.boolargs["+n+"]":e?"(+C.args["+n+"] || 0)":o?"bool(C.args["+n+"])":"C.args["+n+"]"}(t[1],e,o);if(null!=(a=u(t))||null!=(a=f(t)))return a;if("costumeName"===t[0])return"S.getCostumeName()";if("sceneName"===t[0])return"self.getCostumeName()";if("readVariable"===t[0])switch(t[1]){case"sulf.time":return"Date.now()";case"sulf.version":return"0.86";case"sulf.resolutionX":return"self.canvas.width";case"sulf.resolutionY":return"self.canvas.height";case"sulf.hasTouchEvents":return"P.hasTouchEvents";default:return h(t[1])}else{if("contentsOfList:"===t[0])return"contentsOfList("+d(t[1])+")";if("getLine:ofList:"===t[0])return"getLineOfList("+d(t[2])+", "+c(t[1])+")";if("concatenate:with:"===t[0])return'("" + '+c(t[1])+" + "+c(t[2])+")";if("letter:of:"===t[0])return'(("" + '+c(t[2])+")[("+g(t[1])+' | 0) - 1] || "")';if("answer"===t[0])return"self.answer";if("getAttribute:of:"===t[0])return"attribute("+c(t[1])+", "+c(t[2])+")";if("getUserId"===t[0])return"0";if("getUserName"===t[0])return'""';n("Undefined val: "+t[0])}},u=function(t){return"xpos"===t[0]?"S.scratchX":"ypos"===t[0]?"S.scratchY":"heading"===t[0]?"S.direction":"costumeIndex"===t[0]?"(S.currentCostumeIndex + 1)":"backgroundIndex"===t[0]?"(self.currentCostumeIndex + 1)":"scale"===t[0]?"(S.scale * 100)":"volume"===t[0]?"(S.volume * 100)":"tempo"===t[0]?"self.tempoBPM":"lineCountOfList:"===t[0]?d(t[1])+".length":"+"===t[0]?"("+g(t[1])+" + "+g(t[2])+" || 0)":"-"===t[0]?"("+g(t[1])+" - "+g(t[2])+" || 0)":"*"===t[0]?"("+g(t[1])+" * "+g(t[2])+" || 0)":"/"===t[0]?"("+g(t[1])+" / "+g(t[2])+" || 0)":"randomFrom:to:"===t[0]?"random("+g(t[1])+", "+g(t[2])+")":"abs"===t[0]?"Math.abs("+g(t[1])+")":"sqrt"===t[0]?"Math.sqrt("+g(t[1])+")":"stringLength:"===t[0]?'("" + '+c(t[1])+").length":"%"===t[0]||"\\\\"===t[0]?"mod("+g(t[1])+", "+g(t[2])+")":"rounded"===t[0]?"Math.round("+g(t[1])+")":"computeFunction:of:"===t[0]?"mathFunc("+c(t[1])+", "+g(t[2])+")":"mouseX"===t[0]?"self.mouseX":"mouseY"===t[0]?"self.mouseY":"timer"===t[0]?"((self.now() - self.timerStart) / 1000)":"distanceTo:"===t[0]?"S.distanceTo("+c(t[1])+")":"timestamp"===t[0]?"((Date.now() - epoch) / 86400000)":"timeAndDate"===t[0]?"timeAndDate("+c(t[1])+")":void 0},p=/\d/,f=function(t){if("list:contains:"===t[0])return"listContains("+d(t[1])+", "+c(t[2])+")";if("<"===t[0]||">"===t[0]){if("string"==typeof t[1]&&p.test(t[1])||"number"==typeof t[1])var e="<"===t[0],o=t[1],n=t[2];else if("string"==typeof t[2]&&p.test(t[2])||"number"==typeof t[2])e=">"===t[0],o=t[2],n=t[1];var a=+o;return null==o||a!=a?"(compare("+c(t[1])+", "+c(t[2])+") === "+("<"===t[0]?-1:1)+")":(e?"numLess":"numGreater")+"("+a+", "+c(n)+")"}if("="===t[0]){if("string"==typeof t[1]&&p.test(t[1])||"number"==typeof t[1])o=t[1],n=t[2];else if("string"==typeof t[2]&&p.test(t[2])||"number"==typeof t[2])o=t[2],n=t[1];a=+o;return null==o||a!=a?"(equal("+c(t[1])+", "+c(t[2])+"))":"(numEqual("+a+", "+c(n)+"))"}return"&"===t[0]?"("+m(t[1])+" && "+m(t[2])+")":"|"===t[0]?"("+m(t[1])+" || "+m(t[2])+")":"not"===t[0]?"!"+m(t[1]):"mousePressed"===t[0]?"self.mousePressed":"touching:"===t[0]?"S.touching("+c(t[1])+")":"touchingColor:"===t[0]?"S.touchingColor("+c(t[1])+")":"keyPressed:"===t[0]?"!!self.keys[P.getKeyCode("+c(t[1])+")]":void 0},m=function(t){if("boolean"==typeof t)return t;if("number"==typeof t||"string"==typeof t)return 0!=+t&&""!==t&&"false"!==t&&!1!==t;var e=f(t);return null!=e?e:"bool("+c(t,!1,!0)+")"},g=function(t){if("number"==typeof t)return t||0;if("boolean"==typeof t||"string"==typeof t)return+t||0;var e=u(t);return null!=e?e:"(+"+c(t,!0)+" || 0)"},b=function(t){w+="save();\n",w+="R.start = self.now();\n",w+="R.duration = "+g(t)+" * 60 / self.tempoBPM;\n",w+="R.first = true;\n"},y=function(t){var e=s();w+="if (self.now() - R.start < R.duration * 1000 || R.first) {\n",w+="  R.first = false;\n",r(e),w+="}\n",w+="restore();\n"},v=function(t){w+="save();\n",w+="R.start = self.now();\n",w+="R.duration = "+t+";\n",w+="R.first = true;\n";var e=s();w+="if (self.now() - R.start < R.duration * 1000 || R.first) {\n",w+="  R.first = false;\n",r(e),w+="}\n",w+="restore();\n"},E="";E+="if (S.penCSS) {\n",E+="  var hsl = rgb2hsl(S.penColor & 0xffffff);\n",E+="  S.penHue = hsl[0];\n",E+="  S.penSaturation = hsl[1];\n",E+="  S.penLightness = hsl[2];\n",E+="  S.penCSS = null;",E+="}\n";var S=function(e){if(-1!==["turnRight:","turnLeft:","heading:","pointTowards:","setRotationStyle","lookLike:","nextCostume","say:duration:elapsed:from:","say:","think:duration:elapsed:from:","think:","changeGraphicEffect:by:","setGraphicEffect:to:","filterReset","changeSizeBy:","setSizeTo:","comeToFront","goBackByLayers:"].indexOf(e[0])?w+="if (S.visible) VISUAL = true;\n":-1!==["forward:","gotoX:y:","gotoSpriteOrMouse:","changeXposBy:","xpos:","changeYposBy:","ypos:","bounceOffEdge","glideSecs:toX:y:elapsed:from:"].indexOf(e[0])?w+="if (S.visible || S.isPenDown) VISUAL = true;\n":-1!==["showBackground:","startScene","nextBackground","nextScene","startSceneAndWait","show","hide","putPenDown","stampCostume","showVariable:","hideVariable:","doAsk","setVolumeTo:","changeVolumeBy:","setTempoTo:","changeTempoBy:"].indexOf(e[0])&&(w+="VISUAL = true;\n"),"forward:"===e[0])w+="S.forward("+g(e[1])+");\n";else if("turnRight:"===e[0])w+="S.setDirection(S.direction + "+g(e[1])+");\n";else if("turnLeft:"===e[0])w+="S.setDirection(S.direction - "+g(e[1])+");\n";else if("heading:"===e[0])w+="S.setDirection("+g(e[1])+");\n";else if("pointTowards:"===e[0])w+="S.pointTowards("+c(e[1])+");\n";else if("gotoX:y:"===e[0])w+="S.moveTo("+g(e[1])+", "+g(e[2])+");\n";else if("gotoSpriteOrMouse:"===e[0])w+="S.gotoObject("+c(e[1])+");\n";else if("changeXposBy:"===e[0])w+="S.moveTo(S.scratchX + "+g(e[1])+", S.scratchY);\n";else if("xpos:"===e[0])w+="S.moveTo("+g(e[1])+", S.scratchY);\n";else if("changeYposBy:"===e[0])w+="S.moveTo(S.scratchX, S.scratchY + "+g(e[1])+");\n";else if("ypos:"===e[0])w+="S.moveTo(S.scratchX, "+g(e[1])+");\n";else if("bounceOffEdge"===e[0])w+="S.bounceOffEdge();\n";else if("setRotationStyle"===e[0])w+="var style = "+c(e[1])+";\n",w+='S.rotationStyle = style === "left-right" ? "leftRight" : style === "don\'t rotate" ? "none" : "normal";\n';else if("lookLike:"===e[0])w+="S.setCostume("+c(e[1])+");\n";else if("nextCostume"===e[0])w+="S.showNextCostume();\n";else if("showBackground:"===e[0]||"startScene"===e[0])w+="self.setCostume("+c(e[1])+");\n",w+="var threads = sceneChange();\n",w+="if (threads.indexOf(BASE) !== -1) return;\n";else if("nextBackground"===e[0]||"nextScene"===e[0])w+="S.showNextCostume();\n",w+="var threads = sceneChange();\n",w+="if (threads.indexOf(BASE) !== -1) return;\n";else if("startSceneAndWait"===e[0]){w+="save();\n",w+="self.setCostume("+c(e[1])+");\n",w+="R.threads = sceneChange();\n",w+="if (R.threads.indexOf(BASE) !== -1) return;\n";var o=s();w+="if (!running(R.threads)) {\n",r(o),w+="}\n",w+="restore();\n"}else if("say:duration:elapsed:from:"===e[0]){w+="save();\n",w+="R.id = S.say("+c(e[1])+", false);\n",w+="R.start = self.now();\n",w+="R.duration = "+g(e[2])+";\n";o=s();w+="if (self.now() - R.start < R.duration * 1000) {\n",r(o),w+="}\n",w+="if (S.sayId === R.id) {\n",w+='  S.say("");\n',w+="}\n",w+="restore();\n"}else if("say:"===e[0])w+="S.say("+c(e[1])+", false);\n";else if("think:duration:elapsed:from:"===e[0]){w+="save();\n",w+="R.id = S.say("+c(e[1])+", true);\n",w+="R.start = self.now();\n",w+="R.duration = "+g(e[2])+";\n";o=s();w+="if (self.now() - R.start < R.duration * 1000) {\n",r(o),w+="}\n",w+="if (S.sayId === R.id) {\n",w+='  S.say("");\n',w+="}\n",w+="restore();\n"}else if("think:"===e[0])w+="S.say("+c(e[1])+", true);\n";else if("changeGraphicEffect:by:"===e[0])w+="S.changeFilter("+c(e[1])+", "+g(e[2])+");\n";else if("setGraphicEffect:to:"===e[0])w+="S.setFilter("+c(e[1])+", "+g(e[2])+");\n";else if("filterReset"===e[0])w+="S.resetFilters();\n";else if("changeSizeBy:"===e[0])w+="S.scale += "+g(e[1])+" / 100;\n",w+="if (S.scale < 0) S.scale = 0;\n";else if("setSizeTo:"===e[0])w+="S.scale = "+g(e[1])+" / 100;\n",w+="if (S.scale < 0) S.scale = 0;\n";else if("show"===e[0])w+="S.visible = true;\n",w+="if (S.saying) S.updateBubble();\n";else if("hide"===e[0])w+="S.visible = false;\n",w+="if (S.saying) S.updateBubble();\n";else if("comeToFront"===e[0])w+="var i = self.children.indexOf(S);\n",w+="if (i !== -1) self.children.splice(i, 1);\n",w+="self.children.push(S);\n";else if("goBackByLayers:"===e[0])w+="var i = self.children.indexOf(S);\n",w+="if (i !== -1) {\n",w+="  self.children.splice(i, 1);\n",w+="  self.children.splice(Math.max(0, i - "+g(e[1])+"), 0, S);\n",w+="}\n";else if("playSound:"===e[0])P.audioContext&&(w+="var sound = S.getSound("+c(e[1])+");\n",w+="if (sound) playSound(sound);\n");else if("doPlaySoundAndWait"===e[0])P.audioContext&&(w+="var sound = S.getSound("+c(e[1])+");\n",w+="if (sound) {\n",w+="  playSound(sound);\n",v("sound.duration"),w+="}\n");else if("stopAllSounds"===e[0])P.audioContext&&(w+="self.stopAllSounds();\n");else if("playDrum"===e[0])b(e[2]),P.audioContext&&(w+="playSpan(DRUMS[Math.round("+g(e[1])+") - 1] || DRUMS[2], 60, 10);\n"),y();else if("rest:elapsed:from:"===e[0])b(e[1]),y();else if("noteOn:duration:elapsed:from:"===e[0])b(e[2]),P.audioContext&&(w+="playNote("+g(e[1])+", R.duration);\n"),y();else if("instrument:"===e[0])w+="S.instrument = Math.max(0, Math.min(INSTRUMENTS.length - 1, "+g(e[1])+" - 1)) | 0;";else if("changeVolumeBy:"===e[0]||"setVolumeTo:"===e[0])w+="S.volume = Math.min(1, Math.max(0, "+("changeVolumeBy:"===e[0]?"S.volume + ":"")+g(e[1])+" / 100));\n",w+="if (S.node) S.node.gain.setValueAtTime(S.volume, audioContext.currentTime);\n",w+="for (var sounds = S.sounds, i = sounds.length; i--;) {\n",w+="  var sound = sounds[i];\n",w+="  if (sound.node && sound.target === S) {\n",w+="    sound.node.gain.setValueAtTime(S.volume, audioContext.currentTime);\n",w+="  }\n",w+="}\n";else if("changeTempoBy:"===e[0])w+="self.tempoBPM += "+g(e[1])+";\n";else if("setTempoTo:"===e[0])w+="self.tempoBPM = "+g(e[1])+";\n";else if("clearPenTrails"===e[0])w+="self.penCanvas.width = 480 * self.maxZoomX;\n",w+="self.penCanvas.height = 360 * self.maxZoomY;\n",w+="self.penContext.scale(self.maxZoomX, self.maxZoomY);\n",w+='self.penContext.lineCap = "round";\n';else if("putPenDown"===e[0])w+="S.isPenDown = true;\n",w+="S.dotPen();\n";else if("putPenUp"===e[0])w+="S.isPenDown = false;\n",w+="S.dotPen();\n",w+="S.penState = null;\n";else if("penColor:"===e[0])w+="var c = "+g(e[1])+";\n",w+="S.penColor = c;\n",w+="var a = (c >> 24 & 0xff) / 0xff;\n",w+='S.penCSS = "rgba(" + (c >> 16 & 0xff) + "," + (c >> 8 & 0xff) + "," + (c & 0xff) + ", " + (a || 1) + ")";\n';else if("setPenHueTo:"===e[0])w+=E,w+="S.penHue = "+g(e[1])+" * 360 / 200;\n",w+="S.penSaturation = 100;\n";else if("changePenHueBy:"===e[0])w+=E,w+="S.penHue += "+g(e[1])+" * 360 / 200;\n",w+="S.penSaturation = 100;\n";else if("setPenShadeTo:"===e[0])w+=E,w+="S.penLightness = "+g(e[1])+" % 200;\n",w+="if (S.penLightness < 0) S.penLightness += 200;\n",w+="S.penSaturation = 100;\n";else if("changePenShadeBy:"===e[0])w+=E,w+="S.penLightness = (S.penLightness + "+g(e[1])+") % 200;\n",w+="if (S.penLightness < 0) S.penLightness += 200;\n",w+="S.penSaturation = 100;\n";else if("penSize:"===e[0])w+="var f = "+g(e[1])+";\n",w+="S.penSize = f < 1 ? 1 : f;\n";else if("changePenSizeBy:"===e[0])w+="var f = S.penSize + "+g(e[1])+";\n",w+="S.penSize = f < 1 ? 1 : f;\n";else if("stampCostume"===e[0])w+="S.draw(self.penContext);\n";else if("setVar:to:"===e[0])w+=h(e[1])+" = "+c(e[2])+";\n";else if("changeVar:by:"===e[0]){var u=h(e[1]);w+=u+" = (+"+u+" || 0) + "+g(e[2])+";\n"}else if("append:toList:"===e[0])w+="appendToList("+d(e[2])+", "+c(e[1])+");\n";else if("deleteLine:ofList:"===e[0])w+="deleteLineOfList("+d(e[2])+", "+c(e[1])+");\n";else if("insert:at:ofList:"===e[0])w+="insertInList("+d(e[3])+", "+c(e[2])+", "+c(e[1])+");\n";else if("setLine:ofList:to:"===e[0])w+="setLineOfList("+d(e[2])+", "+c(e[1])+", "+c(e[3])+");\n";else if("showVariable:"===e[0]||"hideVariable:"===e[0]){var p="showVariable:"===e[0];if("string"!=typeof e[1])throw new Error("Dynamic variables are not supported");var f=void 0!==t.vars[e[1]]?"S":"self";w+=f+".showVariable("+c(e[1])+", "+p+");\n"}else if("broadcast:"===e[0])w+="var threads = broadcast("+c(e[1])+");\n",w+="if (threads.indexOf(BASE) !== -1) return;\n";else if("call"===e[0]){w+="call("+c(e[1])+", "+a()+", [";for(var S=2;S<e.length;S++)S>2&&(w+=", "),w+=c(e[S]);w+="]);\n",w+="return;\n",s()}else if("doBroadcastAndWait"===e[0]){w+="save();\n",w+="R.threads = broadcast("+c(e[1])+");\n",w+="if (R.threads.indexOf(BASE) !== -1) return;\n";o=s();w+="if (running(R.threads)) {\n",r(o),w+="}\n",w+="restore();\n"}else if("doForever"===e[0]){o=s();l(e[1]),r(o)}else if("doForeverIf"===e[0]){o=s();w+="if ("+m(e[1])+") {\n",l(e[2]),w+="}\n",r(o)}else if("doIf"===e[0])w+="if ("+m(e[1])+") {\n",l(e[2]),w+="}\n";else if("doIfElse"===e[0])w+="if ("+m(e[1])+") {\n",l(e[2]),w+="} else {\n",l(e[3]),w+="}\n";else if("doRepeat"===e[0]){w+="save();\n",w+="R.count = "+g(e[1])+";\n";o=s();w+="if (R.count >= 0.5) {\n",w+="  R.count -= 1;\n",l(e[2]),i(o),w+="} else {\n",w+="  restore();\n",w+="}\n"}else if("doReturn"===e[0])w+="endCall();\n",w+="return;\n";else if("doUntil"===e[0]){o=s();w+="if (!"+m(e[1])+") {\n",l(e[2]),i(o),w+="}\n"}else if("doWhile"===e[0]){o=s();w+="if ("+m(e[1])+") {\n",l(e[2]),i(o),w+="}\n"}else if("doWaitUntil"===e[0]){o=s();w+="if (!"+m(e[1])+") {\n",i(o),w+="}\n"}else if("glideSecs:toX:y:elapsed:from:"===e[0]){w+="save();\n",w+="R.start = self.now();\n",w+="R.duration = "+g(e[1])+";\n",w+="R.baseX = S.scratchX;\n",w+="R.baseY = S.scratchY;\n",w+="R.deltaX = "+g(e[2])+" - S.scratchX;\n",w+="R.deltaY = "+g(e[3])+" - S.scratchY;\n";o=s();w+="var f = (self.now() - R.start) / (R.duration * 1000);\n",w+="if (f > 1) f = 1;\n",w+="S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);\n",w+="if (f < 1) {\n",r(o),w+="}\n",w+="restore();\n"}else if("stopAll"===e[0])w+="self.stopAll();\n",w+="return;\n";else if("stopScripts"===e[0])w+="switch ("+c(e[1])+") {\n",w+='  case "all":\n',w+="    self.stopAll();\n",w+="    return;\n",w+='  case "this script":\n',w+="    endCall();\n",w+="    return;\n",w+='  case "other scripts in sprite":\n',w+='  case "other scripts in stage":\n',w+="    for (var i = 0; i < self.queue.length; i++) {\n",w+="      if (i !== THREAD && self.queue[i] && self.queue[i].sprite === S) {\n",w+="        self.queue[i] = undefined;\n",w+="      }\n",w+="    }\n",w+="    break;\n",w+="}\n";else if("wait:elapsed:from:"===e[0])v(g(e[1]));else if("warpSpeed"===e[0])w+="WARP++;\n",l(e[1]),w+="WARP--;\n";else if("createCloneOf"===e[0])w+="clone("+c(e[1])+");\n";else if("deleteClone"===e[0])w+="if (S.isClone) {\n",w+="  S.remove();\n",w+="  var i = self.children.indexOf(S);\n",w+="  if (i !== -1) self.children.splice(i, 1);\n",w+="  for (var i = 0; i < self.queue.length; i++) {\n",w+="    if (self.queue[i] && self.queue[i].sprite === S) {\n",w+="      self.queue[i] = undefined;\n",w+="    }\n",w+="  }\n",w+="  return;\n",w+="}\n";else if("doAsk"===e[0]){w+="R.id = self.nextPromptId++;\n";o=s();w+="if (self.promptId < R.id) {\n",r(o),w+="}\n",w+="S.ask("+c(e[1])+");\n";o=s();w+="if (self.promptId === R.id) {\n",r(o),w+="}\n"}else"timerReset"===e[0]?w+="self.timerStart = self.now();\n":n("Undefined command: "+e[0])},w="",C=t.fns.length,k=[0];if("procDef"===o[0][0])for(var x=o[0][2],_=o[0][1].match(/%[snmdcb]/g)||[],R=_.length;R--;){var A=_[R];"%d"===A||"%n"===A||"%c"===A?w+="C.numargs["+R+"] = +C.args["+R+"] || 0;\n":"%b"===A&&(w+="C.boolargs["+R+"] = bool(C.args["+R+"]);\n")}for(R=1;R<o.length;R++)S(o[R]);"procDef"===o[0][0]&&(w+="endCall();\n",w+="return;\n");var M=function(t){for(var e="(function() {\n",o=0,n=0,a=!1,s=0,i=t.length;s<i;){var r=t.indexOf("{",s),l=t.indexOf("}",s);if(-1===r&&-1===l){a||(e+=t.slice(s));break}-1===r&&(r=i),-1===l&&(l=i),a?r<l?(n++,s=r+1):(--n||(a=!1),s=l+1):r<l?(e+=t.slice(s,r+1),o++,s=r+1):(e+=t.slice(s,l),s=l+1,"} else {"===t.substr(l,8)?o>0?(e+="} else {",s=l+8):(a=!0,n=0):o>0&&(e+="}",o--))}return e+="})",P.runtime.scopedEval(e)};for(R=0;R<k.length;R++)t.fns.push(M(w.slice(k[R])));var I=t.fns[C];if("whenClicked"===o[0][0])t.listeners.whenClicked.push(I);else if("whenGreenFlag"===o[0][0])t.listeners.whenGreenFlag.push(I);else if("whenCloned"===o[0][0])t.listeners.whenCloned.push(I);else if("whenIReceive"===o[0][0]){var T=o[0][1].toLowerCase();(t.listeners.whenIReceive[T]||(t.listeners.whenIReceive[T]=[])).push(I)}else if("whenKeyPressed"===o[0][0])if("any"===o[0][1])for(R=128;R--;)t.listeners.whenKeyPressed[R].push(I);else t.listeners.whenKeyPressed[P.getKeyCode(o[0][1])].push(I);else if("whenSceneStarts"===o[0][0]){T=o[0][1].toLowerCase();(t.listeners.whenSceneStarts[T]||(t.listeners.whenSceneStarts[T]=[])).push(I)}else"procDef"===o[0][0]?t.procedures[o[0][1]]={inputs:x,warp:o[0][4],fn:I}:n("Undefined event: "+o[0][0])}};return function(e){t=Object.create(null),o(e);for(var n=0;n<e.children.length;n++)e.children[n].cmd||o(e.children[n]);for(var a in t)console.warn(a+(t[a]>1?" (repeated "+t[a]+" times)":""))}}(),P.runtime=function(){"use strict";var self,S,R,STACK,C,WARP,CALLS,BASE,THREAD,IMMEDIATE,VISUAL,bool=function(t){return 0!=+t&&""!==t&&"false"!==t&&!1!==t},DIGIT=/\d/,compare=function(t,e){if(("number"==typeof t||DIGIT.test(t))&&("number"==typeof e||DIGIT.test(e))){var o=+t,n=+e;if(o==o&&n==n)return o<n?-1:o===n?0:1}var a=(""+t).toLowerCase(),s=(""+e).toLowerCase();return a<s?-1:a===s?0:1},numLess=function(t,e){if("number"==typeof e||DIGIT.test(e)){var o=+e;if(o==o)return t<o}return""+t<(""+e).toLowerCase()},numGreater=function(t,e){if("number"==typeof e||DIGIT.test(e)){var o=+e;if(o==o)return t>o}return""+t>(""+e).toLowerCase()},equal=function(t,e){if(("number"==typeof t||DIGIT.test(t))&&("number"==typeof e||DIGIT.test(e))){var o=+t,n=+e;if(o==o&&n==n)return o===n}return(""+t).toLowerCase()===(""+e).toLowerCase()},numEqual=function(t,e){if("number"==typeof e||DIGIT.test(e)){var o=+e;return o==o&&t===o}return!1},mod=function(t,e){var o=t%e;return o/e<0&&(o+=e),o},random=function(t,e){if((t=+t||0)>(e=+e||0)){var o=e;e=t,t=o}return t%1==0&&e%1==0?Math.floor(Math.random()*(e-t+1))+t:Math.random()*(e-t)+t},rgb2hsl=function(t){var e=(t>>16&255)/255,o=(t>>8&255)/255,n=(255&t)/255,a=Math.min(e,o,n),s=Math.max(e,o,n);if(a===s)return[0,0,100*e];var i,r=s-a,l=(a+s)/2,h=r/(1-Math.abs(2*l-1));switch(s){case e:i=((o-n)/r+6)%6;break;case o:i=(n-e)/r+2;break;case n:i=(e-o)/r+4}return[i*=60,100*h,100*l]},clone=function(t){var e="_myself_"===t?S:self.getObject(t),o=e.clone();self.children.splice(self.children.indexOf(e),0,o),self.triggerFor(o,"whenCloned")},epoch=Date.UTC(2e3,0,1),timeAndDate=P.Watcher.prototype.timeAndDate=function(t){switch(t){case"year":return(new Date).getFullYear();case"month":return(new Date).getMonth()+1;case"date":return(new Date).getDate();case"day of week":return(new Date).getDay()+1;case"hour":return(new Date).getHours();case"minute":return(new Date).getMinutes();case"second":return(new Date).getSeconds()}return 0},getVars=function(t){return void 0!==self.vars[t]?self.vars:S.vars},getLists=function(t){return void 0!==self.lists[t]?self.lists:(void 0===S.lists[t]&&(S.lists[t]=[]),S.lists)},listIndex=function(t,e,o){var n=0|e;return n===e?n>0&&n<=o?n-1:-1:"random"===e||"any"===e?Math.random()*o|0:"last"===e?o-1:n>0&&n<=o?n-1:-1},contentsOfList=function(t){for(var e=!0,o=t.length;o--;)if(1!==t[o].length){e=!1;break}return t.join(e?"":" ")},getLineOfList=function(t,e){var o=listIndex(t,e,t.length);return-1!==o?t[o]:""},listContains=function(t,e){for(var o=t.length;o--;)if(equal(t[o],e))return!0;return!1},appendToList=function(t,e){t.push(e)},deleteLineOfList=function(t,e){if("all"===e)t.length=0;else{var o=listIndex(t,e,t.length);o===t.length-1?t.pop():-1!==o&&t.splice(o,1)}},insertInList=function(t,e,o){var n=listIndex(t,e,t.length+1);n===t.length?t.push(o):-1!==n&&t.splice(n,0,o)},setLineOfList=function(t,e,o){var n=listIndex(t,e,t.length);-1!==n&&(t[n]=o)},mathFunc=function(t,e){switch(t){case"abs":return Math.abs(e);case"floor":return Math.floor(e);case"sqrt":return Math.sqrt(e);case"ceiling":return Math.ceil(e);case"cos":return Math.cos(e*Math.PI/180);case"sin":return Math.sin(e*Math.PI/180);case"tan":return Math.tan(e*Math.PI/180);case"asin":return 180*Math.asin(e)/Math.PI;case"acos":return 180*Math.acos(e)/Math.PI;case"atan":return 180*Math.atan(e)/Math.PI;case"ln":return Math.log(e);case"log":return Math.log(e)/Math.LN10;case"e ^":return Math.exp(e);case"10 ^":return Math.exp(e*Math.LN10)}return 0},attribute=function(t,e){var o=self.getObject(e);if(!o)return 0;if(o.isSprite)switch(t){case"x position":return o.scratchX;case"y position":return o.scratchY;case"direction":return o.direction;case"costume #":return o.currentCostumeIndex+1;case"costume name":return o.costumes[o.currentCostumeIndex].costumeName;case"size":return 100*o.scale;case"volume":return 0}else switch(t){case"background #":case"backdrop #":return o.currentCostumeIndex+1;case"backdrop name":return o.costumes[o.currentCostumeIndex].costumeName;case"volume":return 0}var n=o.vars[t];return void 0!==n?n:0},VOLUME=.3,audioContext=P.audioContext;if(audioContext){var wavBuffers=P.IO.wavBuffers,volumeNode=audioContext.createGain();volumeNode.gain.setTargetAtTime(VOLUME,audioContext.currentTime,.015),volumeNode.connect(audioContext.destination);var playNote=function(t,e){for(var o=INSTRUMENTS[S.instrument],n=0,a=o.length;n<a;n++){var s=o[n];if(s.top>=t||128===s.top)break}playSpan(s,Math.max(0,Math.min(127,t)),e)},playSpan=function(t,e,o){S.node||(S.node=audioContext.createGain(),S.node.gain.value=S.volume,S.node.connect(volumeNode));var n=audioContext.createBufferSource(),a=audioContext.createGain(),s=wavBuffers[t.name];if(s){n.buffer=s,(n.loop=t.loop)&&(n.loopStart=t.loopStart,n.loopEnd=t.loopEnd),n.connect(a),a.connect(S.node);var i=audioContext.currentTime;n.playbackRate.value=Math.pow(2,(e-69)/12)/t.baseRatio;var r=a.gain;r.value=0,r.setValueAtTime(0,i),t.attackEnd<o?(r.linearRampToValueAtTime(1,i+t.attackEnd),t.decayTime>0&&t.holdEnd<o?(r.linearRampToValueAtTime(1,i+t.holdEnd),t.decayEnd<o?r.linearRampToValueAtTime(0,i+t.decayEnd):r.linearRampToValueAtTime(1-(o-holdEnd)/t.decayTime,i+o)):r.linearRampToValueAtTime(1,i+o)):r.linearRampToValueAtTime(1,i+o),r.linearRampToValueAtTime(0,i+o+.02267573696),n.start(i),n.stop(i+o+.02267573696)}},playSound=function(t){t.buffer&&(t.node||(t.node=audioContext.createGain(),t.node.gain.value=S.volume,t.node.connect(volumeNode)),t.target=S,t.node.gain.setValueAtTime(S.volume,audioContext.currentTime),t.source&&t.source.disconnect(),t.source=audioContext.createBufferSource(),t.source.buffer=t.buffer,t.source.connect(t.node),t.source.start(audioContext.currentTime))}}var save=function(){STACK.push(R),R={}},restore=function(){R=STACK.pop()},call=function(t,e,o){var n=S.procedures[t];if(n)if(STACK.push(R),CALLS.push(C),C={base:n.fn,fn:S.fns[e],args:o,numargs:[],boolargs:[],stack:STACK=[],warp:n.warp},R={},C.warp||WARP)WARP++,IMMEDIATE=n.fn;else{for(var a=CALLS.length,s=5;a--&&s--;)if(CALLS[a].base===n.fn){var i=!0;break}i?self.queue[THREAD]={sprite:S,base:BASE,fn:n.fn,calls:CALLS}:IMMEDIATE=n.fn}else IMMEDIATE=S.fns[e]},endCall=function(){CALLS.length&&(WARP&&WARP--,IMMEDIATE=C.fn,C=CALLS.pop(),STACK=C.stack,R=STACK.pop())},sceneChange=function(){return self.trigger("whenSceneStarts",self.costumes[self.currentCostumeIndex].costumeName)},broadcast=function(t){return self.trigger("whenIReceive",t)},running=function(t){for(var e=0;e<self.queue.length;e++)if(self.queue[e]&&-1!==t.indexOf(self.queue[e].base))return!0;return!1},queue=function(t){WARP?IMMEDIATE=S.fns[t]:forceQueue(t)},forceQueue=function(t){self.queue[THREAD]={sprite:S,base:BASE,fn:S.fns[t],calls:CALLS}};P.Stage.prototype.framerate=30,P.Stage.prototype.initRuntime=function(){this.queue=[],this.onError=this.onError.bind(this)},P.Stage.prototype.startThread=function(t,e){for(var o={sprite:t,base:e,fn:e,calls:[{args:[],stack:[{}]}]},n=0;n<this.queue.length;n++){var a=this.queue[n];if(a&&a.sprite===t&&a.base===e)return void(this.queue[n]=o)}this.queue.push(o)},P.Stage.prototype.triggerFor=function(t,e,o){var n;if("whenClicked"===e?n=t.listeners.whenClicked:"whenCloned"===e?n=t.listeners.whenCloned:"whenGreenFlag"===e?n=t.listeners.whenGreenFlag:"whenIReceive"===e?n=t.listeners.whenIReceive[(""+o).toLowerCase()]:"whenKeyPressed"===e?n=t.listeners.whenKeyPressed[o]:"whenSceneStarts"===e&&(n=t.listeners.whenSceneStarts[(""+o).toLowerCase()]),n)for(var a=0;a<n.length;a++)this.startThread(t,n[a]);return n||[]},P.Stage.prototype.trigger=function(t,e){for(var o=[],n=this.children.length;n--;)this.children[n].isSprite&&(o=o.concat(this.triggerFor(this.children[n],t,e)));return o.concat(this.triggerFor(this,t,e))},P.Stage.prototype.triggerGreenFlag=function(){this.timerStart=this.now(),this.trigger("whenGreenFlag")},P.Stage.prototype.start=function(){this.isRunning=!0,this.interval||(addEventListener("error",this.onError),this.baseTime=Date.now(),this.interval=setInterval(this.step.bind(this),1e3/this.framerate))},P.Stage.prototype.pause=function(){this.interval&&(this.baseNow=this.now(),clearInterval(this.interval),delete this.interval,removeEventListener("error",this.onError)),this.isRunning=!1},P.Stage.prototype.stopAll=function(){this.hidePrompt=!1,this.prompter.style.display="none",this.promptId=this.nextPromptId=0,this.queue.length=0,this.resetFilters(),this.stopSounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.isClone?(e.remove(),this.children.splice(t,1),t-=1):e.isSprite&&(e.resetFilters(),e.saying&&e.say(""),e.stopSounds())}},P.Stage.prototype.now=function(){return this.baseNow+Date.now()-this.baseTime},P.Stage.prototype.step=function(){self=this,VISUAL=!1;var t=Date.now();do{var e=this.queue;for(THREAD=0;THREAD<e.length;THREAD++)if(e[THREAD]){for(S=e[THREAD].sprite,IMMEDIATE=e[THREAD].fn,BASE=e[THREAD].base,CALLS=e[THREAD].calls,C=CALLS.pop(),STACK=C.stack,R=STACK.pop(),e[THREAD]=void 0,WARP=0;IMMEDIATE;){var o=IMMEDIATE;IMMEDIATE=null,o()}STACK.push(R),CALLS.push(C)}for(var n=e.length;n--;)e[n]||e.splice(n,1)}while((self.isTurbo||!VISUAL)&&Date.now()-t<1e3/this.framerate&&e.length);this.draw(),S=null},P.Stage.prototype.onError=function(t){this.handleError(t.error),clearInterval(this.interval)},P.Stage.prototype.handleError=function(t){console.error(t.stack)};var INSTRUMENTS=[[{top:38,name:"AcousticPiano_As3",baseRatio:.5316313272700484,loop:!0,loopStart:.465578231292517,loopEnd:.7733786848072562,attackEnd:0,holdEnd:.1,decayEnd:22.1},{top:44,name:"AcousticPiano_C4",baseRatio:.5905141892259927,loop:!0,loopStart:.6334693877551021,loopEnd:.8605442176870748,attackEnd:0,holdEnd:.1,decayEnd:20.1},{top:51,name:"AcousticPiano_G4",baseRatio:.8843582887700535,loop:!0,loopStart:.5532879818594104,loopEnd:.5609977324263039,attackEnd:0,holdEnd:.08,decayEnd:18.08},{top:62,name:"AcousticPiano_C6",baseRatio:2.3557692307692304,loop:!0,loopStart:.5914739229024943,loopEnd:.6020861678004535,attackEnd:0,holdEnd:.08,decayEnd:16.08},{top:70,name:"AcousticPiano_F5",baseRatio:1.5776515151515151,loop:!0,loopStart:.5634920634920635,loopEnd:.5879818594104308,attackEnd:0,holdEnd:.04,decayEnd:14.04},{top:77,name:"AcousticPiano_Ds6",baseRatio:2.800762112139358,loop:!0,loopStart:.560907029478458,loopEnd:.5836281179138322,attackEnd:0,holdEnd:.02,decayEnd:10.02},{top:85,name:"AcousticPiano_Ds6",baseRatio:2.800762112139358,loop:!0,loopStart:.560907029478458,loopEnd:.5836281179138322,attackEnd:0,holdEnd:0,decayEnd:8},{top:90,name:"AcousticPiano_Ds6",baseRatio:2.800762112139358,loop:!0,loopStart:.560907029478458,loopEnd:.5836281179138322,attackEnd:0,holdEnd:0,decayEnd:6},{top:96,name:"AcousticPiano_D7",baseRatio:5.275119617224881,loop:!0,loopStart:.3380498866213152,loopEnd:.34494331065759637,attackEnd:0,holdEnd:0,decayEnd:3},{top:128,name:"AcousticPiano_D7",baseRatio:5.275119617224881,loop:!0,loopStart:.3380498866213152,loopEnd:.34494331065759637,attackEnd:0,holdEnd:0,decayEnd:2}],[{top:48,name:"ElectricPiano_C2",baseRatio:.14870515241435123,loop:!0,loopStart:.6956009070294784,loopEnd:.7873015873015873,attackEnd:0,holdEnd:.08,decayEnd:10.08},{top:74,name:"ElectricPiano_C4",baseRatio:.5945685670261941,loop:!0,loopStart:.5181859410430839,loopEnd:.5449433106575964,attackEnd:0,holdEnd:.04,decayEnd:8.04},{top:128,name:"ElectricPiano_C4",baseRatio:.5945685670261941,loop:!0,loopStart:.5181859410430839,loopEnd:.5449433106575964,attackEnd:0,holdEnd:0,decayEnd:6}],[{top:128,name:"Organ_G2",baseRatio:.22283731584620914,loop:!0,loopStart:.05922902494331066,loopEnd:.1510204081632653,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:40,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:15},{top:56,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:13.5},{top:60,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:12},{top:67,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:8.5},{top:72,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:7},{top:83,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:5.5},{top:128,name:"AcousticGuitar_F3",baseRatio:.3977272727272727,loop:!0,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:4.5}],[{top:40,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:15},{top:56,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:13.5},{top:60,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:12},{top:67,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:8.5},{top:72,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:7},{top:83,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:5.5},{top:128,name:"ElectricGuitar_F3",baseRatio:.39615522817103843,loop:!0,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:4.5}],[{top:34,name:"ElectricBass_G1",baseRatio:.11111671034065712,loop:!0,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:17},{top:48,name:"ElectricBass_G1",baseRatio:.11111671034065712,loop:!0,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:14},{top:64,name:"ElectricBass_G1",baseRatio:.11111671034065712,loop:!0,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:12},{top:128,name:"ElectricBass_G1",baseRatio:.11111671034065712,loop:!0,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:10}],[{top:38,name:"Pizz_G2",baseRatio:.21979665071770335,loop:!0,loopStart:.3879365079365079,loopEnd:.3982766439909297,attackEnd:0,holdEnd:0,decayEnd:5},{top:45,name:"Pizz_G2",baseRatio:.21979665071770335,loop:!0,loopStart:.3879365079365079,loopEnd:.3982766439909297,attackEnd:0,holdEnd:.012,decayEnd:4.012},{top:56,name:"Pizz_A3",baseRatio:.503654636820466,loop:!0,loopStart:.5197278911564626,loopEnd:.5287528344671202,attackEnd:0,holdEnd:0,decayEnd:4},{top:64,name:"Pizz_A3",baseRatio:.503654636820466,loop:!0,loopStart:.5197278911564626,loopEnd:.5287528344671202,attackEnd:0,holdEnd:0,decayEnd:3.2},{top:72,name:"Pizz_E4",baseRatio:.7479647218453188,loop:!0,loopStart:.7947845804988662,loopEnd:.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:2.8},{top:80,name:"Pizz_E4",baseRatio:.7479647218453188,loop:!0,loopStart:.7947845804988662,loopEnd:.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:2.2},{top:128,name:"Pizz_E4",baseRatio:.7479647218453188,loop:!0,loopStart:.7947845804988662,loopEnd:.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:1.5}],[{top:41,name:"Cello_C2",baseRatio:.14870515241435123,loop:!0,loopStart:.3876643990929705,loopEnd:.40294784580498866,attackEnd:0,holdEnd:0,decayEnd:0},{top:52,name:"Cello_As2",baseRatio:.263755980861244,loop:!0,loopStart:.3385487528344671,loopEnd:.35578231292517004,attackEnd:0,holdEnd:0,decayEnd:0},{top:62,name:"Violin_D4",baseRatio:.6664047388781432,loop:!0,loopStart:.48108843537414964,loopEnd:.5151927437641723,attackEnd:0,holdEnd:0,decayEnd:0},{top:75,name:"Violin_A4",baseRatio:.987460815047022,loop:!0,loopStart:.14108843537414967,loopEnd:.15029478458049886,attackEnd:.07,holdEnd:.07,decayEnd:.07},{top:128,name:"Violin_E5",baseRatio:1.4885238523852387,loop:!0,loopStart:.10807256235827664,loopEnd:.1126530612244898,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:30,name:"BassTrombone_A2_3",baseRatio:.24981872564125807,loop:!0,loopStart:.061541950113378686,loopEnd:.10702947845804989,attackEnd:0,holdEnd:0,decayEnd:0},{top:40,name:"BassTrombone_A2_2",baseRatio:.24981872564125807,loop:!0,loopStart:.08585034013605441,loopEnd:.13133786848072562,attackEnd:0,holdEnd:0,decayEnd:0},{top:55,name:"Trombone_B3",baseRatio:.5608240680183126,loop:!0,loopStart:.12,loopEnd:.17673469387755103,attackEnd:0,holdEnd:0,decayEnd:0},{top:88,name:"Trombone_B3",baseRatio:.5608240680183126,loop:!0,loopStart:.12,loopEnd:.17673469387755103,attackEnd:.05,holdEnd:.05,decayEnd:.05},{top:128,name:"Trumpet_E5",baseRatio:1.4959294436906376,loop:!0,loopStart:.1307936507936508,loopEnd:.14294784580498865,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:128,name:"Clarinet_C4",baseRatio:.5940193965517241,loop:!0,loopStart:.6594104308390023,loopEnd:.7014965986394558,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:40,name:"TenorSax_C3",baseRatio:.2971698113207547,loop:!0,loopStart:.4053968253968254,loopEnd:.4895238095238095,attackEnd:0,holdEnd:0,decayEnd:0},{top:50,name:"TenorSax_C3",baseRatio:.2971698113207547,loop:!0,loopStart:.4053968253968254,loopEnd:.4895238095238095,attackEnd:.02,holdEnd:.02,decayEnd:.02},{top:59,name:"TenorSax_C3",baseRatio:.2971698113207547,loop:!0,loopStart:.4053968253968254,loopEnd:.4895238095238095,attackEnd:.04,holdEnd:.04,decayEnd:.04},{top:67,name:"AltoSax_A3",baseRatio:.49814747876378096,loop:!0,loopStart:.3875736961451247,loopEnd:.4103854875283447,attackEnd:0,holdEnd:0,decayEnd:0},{top:75,name:"AltoSax_A3",baseRatio:.49814747876378096,loop:!0,loopStart:.3875736961451247,loopEnd:.4103854875283447,attackEnd:.02,holdEnd:.02,decayEnd:.02},{top:80,name:"AltoSax_A3",baseRatio:.49814747876378096,loop:!0,loopStart:.3875736961451247,loopEnd:.4103854875283447,attackEnd:.02,holdEnd:.02,decayEnd:.02},{top:128,name:"AltoSax_C6",baseRatio:2.3782742681047764,loop:!0,loopStart:.05705215419501134,loopEnd:.0838095238095238,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:61,name:"Flute_B5_2",baseRatio:2.255113636363636,loop:!0,loopStart:.08430839002267573,loopEnd:.10244897959183673,attackEnd:0,holdEnd:0,decayEnd:0},{top:128,name:"Flute_B5_1",baseRatio:2.255113636363636,loop:!0,loopStart:.10965986394557824,loopEnd:.12780045351473923,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:128,name:"WoodenFlute_C5",baseRatio:1.1892952324548416,loop:!0,loopStart:.5181859410430839,loopEnd:.7131065759637188,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:57,name:"Bassoon_C3",baseRatio:.29700969827586204,loop:!0,loopStart:.11011337868480725,loopEnd:.19428571428571428,attackEnd:0,holdEnd:0,decayEnd:0},{top:67,name:"Bassoon_C3",baseRatio:.29700969827586204,loop:!0,loopStart:.11011337868480725,loopEnd:.19428571428571428,attackEnd:.04,holdEnd:.04,decayEnd:.04},{top:76,name:"Bassoon_C3",baseRatio:.29700969827586204,loop:!0,loopStart:.11011337868480725,loopEnd:.19428571428571428,attackEnd:.08,holdEnd:.08,decayEnd:.08},{top:84,name:"EnglishHorn_F3",baseRatio:.39601293103448276,loop:!0,loopStart:.341859410430839,loopEnd:.4049886621315193,attackEnd:.04,holdEnd:.04,decayEnd:.04},{top:128,name:"EnglishHorn_D4",baseRatio:.6699684005833739,loop:!0,loopStart:.22027210884353743,loopEnd:.23723356009070296,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:39,name:"Choir_F3",baseRatio:.3968814788643197,loop:!0,loopStart:.6352380952380953,loopEnd:1.8721541950113378,attackEnd:0,holdEnd:0,decayEnd:0},{top:50,name:"Choir_F3",baseRatio:.3968814788643197,loop:!0,loopStart:.6352380952380953,loopEnd:1.8721541950113378,attackEnd:.04,holdEnd:.04,decayEnd:.04},{top:61,name:"Choir_F3",baseRatio:.3968814788643197,loop:!0,loopStart:.6352380952380953,loopEnd:1.8721541950113378,attackEnd:.06,holdEnd:.06,decayEnd:.06},{top:72,name:"Choir_F4",baseRatio:.7928898424161845,loop:!0,loopStart:.7415419501133786,loopEnd:2.1059410430839,attackEnd:0,holdEnd:0,decayEnd:0},{top:128,name:"Choir_F5",baseRatio:1.5879576065654504,loop:!0,loopStart:.836281179138322,loopEnd:2.0585487528344673,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:38,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:.1,decayEnd:8.1},{top:48,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:.1,decayEnd:7.6},{top:59,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:.06,decayEnd:7.06},{top:70,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:.04,decayEnd:6.04},{top:78,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:.02,decayEnd:5.02},{top:86,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:0,decayEnd:4},{top:128,name:"Vibraphone_C3",baseRatio:.29829545454545453,loop:!0,loopStart:.2812698412698413,loopEnd:.28888888888888886,attackEnd:0,holdEnd:0,decayEnd:3}],[{top:128,name:"MusicBox_C4",baseRatio:.5937634640241276,loop:!0,loopStart:.6475283446712018,loopEnd:.6666666666666666,attackEnd:0,holdEnd:0,decayEnd:2}],[{top:128,name:"SteelDrum_D5",baseRatio:1.3660402567543959,loop:!1,loopStart:-45351473922902495e-21,loopEnd:-45351473922902495e-21,attackEnd:0,holdEnd:0,decayEnd:2}],[{top:128,name:"Marimba_C4",baseRatio:.5946035575013605,loop:!1,loopStart:-45351473922902495e-21,loopEnd:-45351473922902495e-21,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:80,name:"SynthLead_C4",baseRatio:.5942328422565577,loop:!0,loopStart:.006122448979591836,loopEnd:.06349206349206349,attackEnd:0,holdEnd:0,decayEnd:0},{top:128,name:"SynthLead_C6",baseRatio:2.3760775862068964,loop:!0,loopStart:.005623582766439909,loopEnd:.01614512471655329,attackEnd:0,holdEnd:0,decayEnd:0}],[{top:38,name:"SynthPad_A3",baseRatio:.4999105065330231,loop:!0,loopStart:.1910204081632653,loopEnd:3.9917006802721087,attackEnd:.05,holdEnd:.05,decayEnd:.05},{top:50,name:"SynthPad_A3",baseRatio:.4999105065330231,loop:!0,loopStart:.1910204081632653,loopEnd:3.9917006802721087,attackEnd:.08,holdEnd:.08,decayEnd:.08},{top:62,name:"SynthPad_A3",baseRatio:.4999105065330231,loop:!0,loopStart:.1910204081632653,loopEnd:3.9917006802721087,attackEnd:.11,holdEnd:.11,decayEnd:.11},{top:74,name:"SynthPad_A3",baseRatio:.4999105065330231,loop:!0,loopStart:.1910204081632653,loopEnd:3.9917006802721087,attackEnd:.15,holdEnd:.15,decayEnd:.15},{top:86,name:"SynthPad_A3",baseRatio:.4999105065330231,loop:!0,loopStart:.1910204081632653,loopEnd:3.9917006802721087,attackEnd:.2,holdEnd:.2,decayEnd:.2},{top:128,name:"SynthPad_C6",baseRatio:2.3820424708835755,loop:!0,loopStart:.11678004535147392,loopEnd:.41732426303854875,attackEnd:0,holdEnd:0,decayEnd:0}]],DRUMS=[{name:"SnareDrum",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Tom",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"SideStick",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Crash",baseRatio:.8908987181403393,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"HiHatOpen",baseRatio:.9438743126816935,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"HiHatClosed",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Tambourine",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Clap",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Claves",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"WoodBlock",baseRatio:.7491535384383408,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Cowbell",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Triangle",baseRatio:.8514452780229479,loop:!0,loopStart:.7638548752834468,loopEnd:.7825396825396825,attackEnd:0,holdEnd:0,decayEnd:2},{name:"Bongo",baseRatio:.5297315471796477,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Conga",baseRatio:.7954545454545454,loop:!0,loopStart:.1926077097505669,loopEnd:.20403628117913833,attackEnd:0,holdEnd:0,decayEnd:2},{name:"Cabasa",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"GuiroLong",baseRatio:.5946035575013605,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Vibraslap",baseRatio:.8408964152537145,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},{name:"Cuica",baseRatio:.7937005259840998,loop:!1,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0}];return{scopedEval:function(source){return eval(source)}}}();`
];